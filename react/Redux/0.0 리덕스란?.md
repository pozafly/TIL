# 리덕스란?

리덕스는 가장 많이 사용하는 리액트 `상태 관리` 라이브러리. 

- 컴포넌트의 상태 업데이트 관련 로직을 다른 파일로 분리시켜 효율적으로 관리.
- 컴포넌트끼리 같은 상태를 공유할 때도 여러 컴포넌트를 거치지 않고 전달, 업뎃 가능.
- Context API 보다 더욱 체계적 관리 가능.
- 플젝 규모가 클 때는 리덕스를 사용하는게 좋다.
- 편리한 개발자 도구 지원.
- 미들웨어라는 기능 제공해서 비동기 작업을 효율적으로 할 수 있다.

<br/>

## 리덕스를 사용하는 것과 Context API를 사용하는 것의 차이

### 1. 미들웨어

리덕스에는 미들웨어(Middleware)라는 개념이 존재. 리덕스로 상태 관리를 할 때에는 `useReducer`를 사용해볼 때 접했던 개념인 리듀서 함수를 사용한다. 리덕스의 미들웨어를 사용하면 액션 객체가 리듀서에서 처리되기 전에 원하는 작업들을 수행할 수 있다. 예를 들면,

- 특정 조건에 따라 액션이 무시되게 할 수 있다.
- 액션을 콘솔에 출력하거나, 서버쪽에 로깅을 할 수 있다.
- 액션이 디스패치 됐을 때 이를 수정해서 리듀서에게 전달되도록 할 수 있다.
- 특정 액션이 발생했을 때 이에 기반하여 다른 액션이 발생되도록 할 수 있다.
- 특정 액션이 발생했을 때 특정 자바스크립트 함수를 실행시킬 수 있다.

미들웨어는 주로 비동기 작업을 처리 할 때 많이 사용된다.

`useReducer` 훅에서도 외부 라이브러리를 사용하면 미들웨어를 사용할 수 있지만, 자주 사용되지는 않는다.

### 2. 유용한 함수와, Hooks

Context API와 `useReducer` 를 사용할 때는 Context도 새로 만들고, Context의 Provider 설정도 하고 각 Context를 편하게 사용하기 위해 전용 커스텀 Hook을 따로 만들어 사용하기도 했었음. 리덕스에서는 이와 비슷한 작업을 편리하게 해줄 수 있는 여러 기능이 존재함.

`connect` 함수를 사용하면 리덕스의 상태 또는 액션 생성 함수를 컴포넌트의 props로 받아올 수 있고, `useSelector`, `useDispatch`, `useStore`와 같은 Hooks를 사용하면 손쉽게 상태를 조회하거나 액션을 디스패치 할 수 있다.

`connect` 함수와 `useSelector` 함수에는 내부적으로 최적화가 잘 이루어져있어 실제 상태가 바뀔 때만 컴포넌트가 리렌더링 된다. 반면 Context API를 사용할 때에는 그러한 최적화가 자동으로 이루어져있지 않기 때문에 Context가 지니고 있는 상태가 바뀌면 해당 Context의 Provider 내부 컴포넌트들이 모두 리렌더링 된다.

### 3. 하나의 커다란 상태

Context API를 사용해 글로벌 상태를 관리 할 때에는 일반적으로 기능별 Context를 만들어 사용하는 것이 일반적이다. 반면 리덕스는 모든 글로벌 상태를 하나의 커다란 상태 객체에 넣어 사용하는것이 `필수`다. 때문에 매번 Context를 새로 만드는 수고로움을 덜 수 있다.

<br/>

## 리덕스 언제 써야함?

다음 사항을 고려해라.

1. 프로젝트의 규모가 큰가?
   - YES : 리덕스
   - NO : Context API
2. 비동기 작업을 자주 하게 되는가?
   - YES : 리덕스
   - NO : Context API
3. 리덕스를 배워보니까 사용하는게 편한가?
   - YES : 리덕스
   - NO : Context API 또는 MobX

3번이 젤 중요하다. 아무리 리덕스가 좋은 라이브러리라 해도 취향에 맞지 않고 어렵게만 느껴지고 맘에 들지 않는다면 사용하지 않는게 좋다.

