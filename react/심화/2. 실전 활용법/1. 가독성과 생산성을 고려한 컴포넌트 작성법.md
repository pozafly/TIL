# 가독성과 생산성을 고려한 컴포넌트 작성법

같은 기능을 하는 컴포넌트라도 다양한 방식으로 작성될 수 있다. 되도록 컴포넌트를 작성하는 사람 입장에서는 유지 보수하기 쉬운 코드를, 컴포넌트를 사용하는 사람 입장에서는 컴포넌트의 인터페이스를 쉽게 파악할 수 있는 코드를 작성하는게 좋다.

<br/>

## 추천하는 컴포넌트 파일 작성법

컴포넌트 파일에는 다양한 종류의 함수와 변수가 등장함. 그로 인해 코드의 가독성이 떨어지고 관리가 힘들어질 수 있다. 가독성과 생산성을 높이기 위해 코드를 어떻게 배치하면 좋을지 알아보자.

### 컴포넌트 파일 작성 순서

```jsx
MyComponent.propType = {  // ☄️
  // ...
}

export default function MyComponent({ prop1, prop2 }) {  // 🌊
  // ...
}

// 🚀
const COLUMNES = [
  { id: 1, name: 'phoneNumber', width: 200, color: 'white' },
  { id: 2, name: 'city', width: 100, color: 'grey' },
  // ...
];

const URL_PRODUCT_LIST = '/api/products';
function getTotalPrice({ price, total }) {
  // ...
}
```

- ☄️ : 파일의 최상단에는 `propTypes(속성값 타입)`를 정의. 속성값 타입이 가장 먼저 오는 이유는 컴포넌트를 사용하는 입장에서 생각하면 쉽게 이해된다. 컴포넌트를 사용하기 위해서는 그 컴포넌트의 propType을 알아야 하므로 파일을 열었을 때, propType이 가장 먼저 보이는게 좋음. 또 작성자 입장에서도 propType은 아주 중요. 따라서 propType 위에는 import 구문만 오게 하자.
- 🌊 : 컴포넌트 함수의 매개변수는 명명된 매개변수로 정의하는게 좋다.(props 말고 `{val1, val2}` 요런식.) `props.` 을 입력하지 않아도 됌. 그리고 컴포넌트 이름을 꼭 작성. function() 처럼 이름이 없는 컴포넌트로 만들면 리액트 개발자 도구에서 디버깅이 힘들다.
- 🚀 : 컴포넌트 바깥의 변수와 함수는 파일의 가장 밑에 정의. 변수는 상수 변수(`const`)로 정의. 그리고 상수 변수의 이름은 대문자가 좋음. 컴포넌트 내부에서 커다란 객체를 생성하는 코드가 있을 때, 가능하면 컴포넌트 외부에서 상수 변수로 정의해서 사용하도록 하자. 그래야 렌더링 시 불필요한 객체 생성을 피할 수 있어 성능상 이점이 있음.

---

### 서로 연관된 코드를 한 곳으로 모으기

여러 가지 기능이 섞여 있는 코드르 ㄹ어떻게 배치하면 좋을지 다음 코드를 통해 알아보자.

```jsx
function Profile({ userId }) {
  const [user, setUser] = useState(null);  // 👾
  const [width, setWidth] = useState(window.innerWidth);  // 👾
  useEffect(() => {
    getUserApi(userId).then(data => setUser(data));
  }, [userId]);
  useEffect(() => {
    const onResize = () => setWidth(window.innerWidth);
    window.addEventListener('resize', onResize);
    return () => {
      window.removeEventListener('resize', onResize);
    };
  }, []);
  // ...
}
```

- 👾 : 이모티콘 테스트