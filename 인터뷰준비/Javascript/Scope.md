# Scope

> 출처 : https://tutorialpost.apptilus.com/code/posts/js/js19-scope/

## 실행 컨텍스트(Execution context)

자바스크립트 해석기는 실행 컨텍스트라는 개념을 사용하여 구문을 해석함. 

- 실행 컨텍스트 : 코드가 실제로 실행되는 영역
- 실행 컨텍스트에는 `전역 컨텍스트`와, 각 함수가 생성한 새로운 실행 컨텍스트인 `함수 컨텍스트`로 나뉨.
  - 전역 컨텍스트 : 함수가 아닌 영역에 선언된 코드가 실행되는 컨텍스트.
  - 함수 컨텍스트 : 함수 내에서 실행되는 코드들은 각자의 함수 컨텍스트를 가짐.
- 이 각각의 컨텍스트에 의해 변수의 스코프가 결정 됨.



## 스코프(Scope)

스코프란, 프로그램의 실행 컨텍스트(Execution Context)에서 보거나 접근할 수 있는 식별자를 말함.

- 전역 스코프 - 변수가 함수 바깥에 선언되어 있거나, 변수 선언 시 var 키워드를 사용하지 않으면 변수는 전역 스코프에 포함 됨.
- 함수 스코프 - 변수가 함수 내에서 선언되면 이 변수는 함수 스코프 내에 존재하게 됨.

자바스크립트 변수는 변수가 접근할 수 있는 범위(스코프)에 따라 **전역변수**와 **지역변수**로 나눌 수 있다.

- 전역변수 - 전역 스코프, 즉 함수 바깥에서 선언된 변수임. 전역변수는 프로그램의 전체에서 접근 가능함.
- 지역변수 - 함수 스코프, 즉 함수 내부에 선언된 변수로, 함수 내부에서만 접근 가능함.

```javascript
var global = 1;

function localFunc() {
  var local = 2;
  console.log(global);  // 1
  console.log(local);   // 2
}

localFunc();
console.log(global);  // 1
console.log(local)    // ReferenceError: local is not defined
```

위 코드와 같이 전역변수로 선언한 `global` 변수의 경우 함수 내부 혹은 전역에서 모두 사용 가능함. 하지만 함수 내부에 선언한 `local` 변수의 경우 전역에서 사용하려고 하는 경우 정의되지 않았다고 오류를 뱉음.

이렇게 변수의 유효범위를 두는 이유?

- 변수명의 충돌을 방지하기 위해서.
- `local` 이라는 이름의 변수는 `localFunc` 라는 함수 내부에서만 유효하므로, 다른 함수에서도 동일한 변수 명을 사용할 수 있게 됨.
- 하지만 `global` 이라는 변수 명은 다른 곳에서 사용할 경우 문제를 일으킬 가능성이 높아지게 됨.



## 스코프 체인

만약 위 예제에서 `localFunc()` 함수 내부에도 `global` 변수를 선언하면 어떻게 됨? 당연히 함수 내부에서 선언한 변수를 사용하게 되고 함수 내부에 `global` 변수가 존재하므로 굳이 전역까지 올라가서 변수를 찾지 않음.

범위를 계속 넓혀가며 결국 전역 스코프까지 찾는 것을 `스코프 체인` 이라고 함.