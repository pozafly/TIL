# 라우터

## 라우터

- 여러 네트워크를 연결, IP 패킷을 서로 다른 네트워크로 전송하는 장비
- 인터넷은 수많은 라우터들이 그물망처럼 네트워크를 연결해 구성됨.
- 라우터는 라우터에 IP 패킷을 버킷 딜레이로 전달해 목적지 단말까지 전달.

![[Pasted image 20260119002253.png]]

대표적 기술은 **라우팅**, **NAT**다.

## 라우팅

라우터는
- IP 패킷의 목적지 IP 주소와 비교하는 '**목적지 네트워크**'
- IP 패킷을 전달할 장비의 IP 주소를 나타내는 '**넥스트 홉**'
두 가지 정보를 관리해 IP 패킷의 전달처를 전환(스위칭)함.
- IP 패킷의 전달처를 전환하는 기능을 '**라우팅**' 이라 함.
- 목적지 네트워크와 넥스트 홉을 관리하는 테이블을 '**라우팅 테이블**' 이라 함.

### 라우팅 동작

![[Pasted image 20260119002721.png]]

- rt1은 발신자 IP를 라우팅 테이블에서 찾음
- 없으니 0.0.0.0/0인 기본 경로 주소와 일치시킴
	- 기본 경로의 넥스트 홉을 '**기본 게이트웨이**' 라 함.
- 넥스트 홉이 `10.1.1.246` 이므로 ARP 테이블에서 이 IP 주소에 해당하는 MAC 주소 검색함.
- 이더넷으로 캡슐화해 케이블로 흘려보냄.

![[Pasted image 20260119004015.png]]

- '직접 연결' (rt3)인 경우 rt3가 ns1의 데이터 링크 계층에서 목적지 MAC 주소, 네트워크 계층에서 목적지 IP 주소를 보고 패킷을 받아들여 상위 계층(전송 계층 ~ 애플리케이션 계층)으로 처리를 넘김

![[Pasted image 20260119004736.png]]

### 라우팅 테이블

![[Pasted image 20260119004830.png]]

#### 1. 정정 라우팅

- 수동으로 함
- 목적지 네트워크와 넥스트 홉을 라우터에 직접 설정
- 소규모에 적합

![[Pasted image 20260119004936.png]]

#### 2. 동적 라우팅

- 라우터끼리 경로 정보를 교환해 자동으로 라우팅 엔트리를 생성하는 방식
- 경로 정보를 교환하기 위한 프로토콜을 '**라우팅 프로토콜**' 이라 함.
- 라우터 하나하나에 목적지, 넥스트 홉을 설정 필요 없음.
- OSPF(Open Shortest Path First) 라우팅 프로토콜이 있음
	- 대상 네트워크와 목적지 네트워크끼리 서로 주변 네트워크와 공개 IP 네트워크를 광고하여 각각 라우팅 엔트리를 생성.

![[Pasted image 20260119011443.png]]

❉ 재분배
- 정적라우팅과 동적라우팅은 호환 안됨.
- 동적라우팅 중 라우팅 프로토콜이 다르면 호환 안됨.
- 각각을 잘 변환해서 잘 작동하도록 만들어야 함. -> 재분배
![[Pasted image 20260119011757.png]]
