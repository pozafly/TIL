# ICMP

- Internet Control Message Protocol
- IP 레벡의 통신을 확인하거나 오류를 알리는 프로토콜
- ping 명령은 ICMP 패킷 전송 때 사용하는 네트워크 진단 프로그램임.

## 이론

- 인터넷을 제어하는 메시지를 주고 받는 프로토콜임.
- ICMP는 IP에서 필수 불가결한 부분, 모든 IP 모듈에 구현되어야 함.

## 패킷 형식

![[Pasted image 20260119000707.png]]

`유형`, `코드` 두 부분으로 봐도 무방

| 유형(Type)                  | 코드(Code) | 설명                                                     | 의미                                     |
| ------------------------- | -------: | ------------------------------------------------------ | -------------------------------------- |
| 0 Echo Reply              |        0 | Echo reply                                             | 에코 응답                                  |
| 3 Destination Unreachable |        0 | Network unreachable                                    | 목적지 네트워크에 도달할 수 없음                     |
|                           |        1 | Host unreachable                                       | 목적지 호스트에 연결할 수 없음                      |
|                           |        2 | Protocol unreachable                                   | 프로토콜에 도달할 수 없음                         |
|                           |        3 | Port unreachable                                       | 포트에 도달할 수 없음                           |
|                           |        4 | Fragmentation needed but DF bit set                    | 단편화가 필요하지만 DF 비트가 1로 설정되어 있어 단편화 불가    |
|                           |        5 | Source route failed                                    | 출처 불명                                  |
|                           |        6 | Network unknown                                        | 목적지 네트워크 불명                            |
|                           |        7 | Host unknown                                           | 목적지 호스트 불명                             |
|                           |        9 | Destination network administratively prohibited        | 목적지 네트워크에 대한 통신이 관리상 거부(Reject)됨       |
|                           |       10 | Destination host administratively prohibited           | 목적지 호스트에 대한 통신이 관리상 거부(Reject)됨        |
|                           |       11 | Network unreachable for ToS                            | 지정한 ToS 값으로 목적지 네트워크에 도달할 수 없음         |
|                           |       12 | Host unreachable for ToS                               | 지정한 ToS 값으로 목적지 호스트에 도달할 수 없음          |
|                           |       13 | Communication administratively prohibited by filtering | 필터링으로 인해 통신이 관리적으로 금지됨                 |
|                           |       14 | Host precedence violation                              | 프레지던스 값 위반                             |
|                           |       15 | Precedence cutoff in effect                            | 프레지던스 값이 너무 낮아 차단됨                     |
| 5 Redirect                |        0 | Redirect for network                                   | 목적지 네트워크 통신을 지정된 IP 주소로 전송(리디렉션)       |
|                           |        1 | Redirect for host                                      | 목적지 호스트 통신을 지정된 IP 주소로 전송(리디렉션)        |
|                           |        2 | Redirect for ToS and network                           | 목적지 네트워크 및 ToS 통신을 지정된 IP 주소로 전송(리디렉션) |
|                           |        3 | Redirect for ToS and host                              | 목적지 호스트 및 ToS 통신을 지정된 IP 주소로 전송(리디렉션)  |
| 8 Echo Request            |        0 | Echo request                                           | 에코 요청                                  |
| 11 Time Exceeded          |        0 | TTL expired                                            | TTL 초과                                 |
