# í”„ë¡œí† íƒ€ì…ì˜ ê°œë… ì´í•´

## Constructor, prototype, instance

â€» [ì‚¬ì§„ ì¶œì²˜](https://codingsalon.tistory.com/28)

![[assets/images/ad89794e56a053469482fca68381deb6_MD5.png]]

ìœ„ ì‚¬ì§„ì€ ì•„ë˜ ì½”ë“œë¥¼ ë„ì‹í™” í•œ ê²ƒì´ë‹¤.
```js
var instance = new Constructor();
```
ì‹¤ì„ ì˜ ì™¼ìª½ ê¼­ì§“ì ì—ëŠ” Constructor(ìƒì„±ì í•¨ìˆ˜)ë¥¼, ì˜¤ë¥¸ìª½ ê¼­ì§“ì ì—ëŠ” Constructor.prototypeì´ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ìœ„ì¹˜ì‹œì¼°ë‹¤. ì™¼ìª½ ê¼­ì§“ì ìœ¼ë¡œë¶€í„° ì•„ë˜ë¥¼ í–¥í•œ í™”ì‚´í‘œ ì¤‘ê°„ì— newê°€ ìˆê³ , í™”ì‚´í‘œì˜ ì¢…ì ì—ëŠ” instanceê°€ ìˆë‹¤. ì˜¤ë¥¸ìª½ ê¼­ì§“ì ìœ¼ë¡œë¶€í„° ëŒ€ê°ì„  ì•„ë˜ë¡œ í–¥í•˜ëŠ” í™”ì‚´í‘œì˜ ì¢…ì ì—ëŠ” `instance.__proto__` ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ìœ„ì¹˜ì‹œì¼°ë‹¤.

- ì–´ë–¤ ìƒì„±ì í•¨ìˆ˜(Constructor)ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´
- Constructorì—ì„œ ì •ì˜ëœ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤(instance)ê°€ ìƒì„±ëœë‹¤.
- ì´ë•Œ instanceì—ëŠ” `__proto__` ë¼ëŠ” í”„ë¡œí¼í‹°ê°€ ìë™ìœ¼ë¡œ ë¶€ì—¬ë˜ëŠ”ë°
- ì´ í”„ë¡œí¼í‹°ëŠ” Constructorì˜ prototype ì´ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•œë‹¤.

prototypeì€ ê°ì²´ë‹¤. ì´ë¥¼ ì°¸ì¡°í•˜ëŠ” `__proto__` ì—­ì‹œ ë‹¹ì—°íˆ ê°ì²´ë‹¤. prototype ê°ì²´ ë‚´ë¶€ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš©í•  ë©”ì„œë“œë¥¼ ì €ì¥í•œë‹¤. ê·¸ëŸ¬ë©´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œë„ ìˆ¨ê²¨ì§„ í”„ë¡œí¼í‹°ì¸ `__proto__` ë¥¼ í†µí•´ ì´ ë©”ì„œë“œë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

â€» ëª…ì„¸ì—ëŠ” `__proto__` ê°€ ì•„ë‹ˆë¼ `[[prototype]]` ì´ë¼ëŠ” ëª…ì¹­ìœ¼ë¡œ ë˜ì–´ìˆê³ , ë¸Œë¼ìš°ì €ê°€ ì ‘ê·¼ì„ ì‹œë„. ES6ì—ì„œëŠ” ì •ì‹ìœ¼ë¡œ ì¸ì •í–ˆë‹¤. ë”°ë¼ì„œ ì‹¤ë¬´ì—ì„œëŠ” ê°€ê¸‰ì  `__proto__` ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ê³  ëŒ€ì‹ , `Object.getPrototypeOf()`, `Object.create()` ë“±ì„ ì´ìš©í•˜ì.

ğŸ“Œ `__proto__`ëŠ” `[[Prototype]]` ìš© getter, setterë‹¤.
`__proto__`ëŠ” `[[Prototype]]`ê³¼ ë‹¤ë¥´ë‹¤. `__proto__`ëŠ” `[[Prototype]]`ì˜ getter(íšë“ì)ì´ì setter(ì„¤ì •ì)ë‹¤.

Personì´ë¼ëŠ” ìƒì„±ì í•¨ìˆ˜ì˜ prototypeì— getName ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ ì§€ì •í–ˆë‹¤ í•´ë³´ì.
```js
var Person = function (name) {
  this._name = name;
};
Person.prototype.getName = function () {
  return this._name;
};
```
ì´ì œ Personì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” `__proto__` í”„ë¡œí¼í‹°ë¥¼ í†µí•´ getNameì„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
```js
var suzi = new Person('Suzi');
suzi.__proto__.getName(); // undefined
```
instanceì˜ `__proto__` ê°€ Constructorì˜ prototype í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ ê²°êµ­ ë‘˜ì€ ê°™ì€ ê°ì²´ë¥¼ ë°”ë¼ë³´ê¸° ë•Œë¬¸ì„.
```js
Person.prototype === suzi.__proto__  // true
```
ë©”ì„œë“œ í˜¸ì¶œ ê²°ê³¼ë¡œ undefinedê°€ ë‚˜ì™”ë‹¤. 'Suzi' ë¼ëŠ” ê°’ì´ ë‚˜ì˜¤ì§€ ì•Šì€ ê²ƒë³´ë‹¤ëŠ” 'ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤'ëŠ” ì ì´ ìš°ì„ ì´ë‹¤. ì–´ë–¤ ë³€ìˆ˜ë¥¼ ì‹¤í–‰í•´ undefinedê°€ ë‚˜ì™”ë‹¤ëŠ” ê²ƒì€ ì´ ë³€ìˆ˜ê°€ 'í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜' ì— í•´ë‹¹í•œë‹¤ëŠ” ë§ì„. ë§Œì•½ ì‹¤í–‰í•  ìˆ˜ ì—†ëŠ”, ì¦‰ í•¨ìˆ˜ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë°ì´í„° íƒ€ì…ì´ì—ˆë‹¤ë©´ TypeErrorê°€ ë°œìƒí–ˆì„ ê²ƒì´ë‹¤. ê·¼ë° ê°’ì´ ì—ëŸ¬ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°’ì´ ë‚˜ì™”ìœ¼ë‹ˆê¹Œ getNameì´ ì‹¤ì œë¡œ ì‹¤í–‰ëìŒì„ ì•Œ ìˆ˜ ìˆê³ , ì´ë¡œë¶€í„° getNameì´ í•¨ìˆ˜ë¼ëŠ” ê²ƒì´ ì…ì¦ ë˜ì—ˆë‹¤.

í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì–´ë–¤ ê°’ì„ ë°˜í™˜í•˜ëŠ”ì§€ ë³´ì. `this.name` ê°’ì„ ë¦¬í„´í•˜ëŠ” ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´ thisì— ì›ë˜ ì˜ë„ì™€ëŠ” ë‹¤ë¥¸ ê°’ì´ í• ë‹¹ëœ ê²ƒì´ë‹¤.
ì–´ë–¤ í•¨ìˆ˜ë¥¼ 'ë©”ì„œë“œë¡œì„œ' í˜¸ì¶œí•  ë•ŒëŠ” ë©”ì„œë“œëª… ë°”ë¡œ ì•ì˜ ê°ì²´ê°€ ê³§ thisê°€ ëœë‹¤ê³  í–ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ `thomas.__proto__.getName()` ì—ì„œ getNameí•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ thisëŠ” thomasê°€ ì•„ë‹ˆë¼ `thomas.__proto__`ë¼ëŠ” ê°ì²´ê°€ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ ê°ì²´ ë‚´ë¶€ì—ëŠ” name í”„ë¡œí¼í‹°ê°€ ì—†ìœ¼ë¯€ë¡œ 'ì°¾ê³ ì í•˜ëŠ” ì‹ë³„ìê°€ ì •ì˜ë¼ ìˆì§€ ì•Šì„ ë•ŒëŠ” Error ëŒ€ì‹  undefinedë¥¼ ë°˜í™˜í•œë‹¤' ë¼ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê·œì•½ì— ì˜í•´ undefinedê°€ ë°˜í™˜ëœ ê²ƒì´ë‹¤.
ê·¸ëŸ¼ ë§Œì•½ `__proto__` ê°ì²´ì— name í”„ë¡œí¼í‹°ê°€ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œ?
```js
var suzi = new Person('Suzi');
suzi.__proto__._name = 'SUZI__proto__';
suzi.__proto__.getName(); // SUZI__proto__
```
ì˜ ì¶œë ¥ëœë‹¤. ê´€ê±´ì€ `this`ë‹¤. thisë¥¼ ì¸ìŠ¤í„´ìŠ¤ë¡œ í•˜ë©´ ì¢‹ê² ë‹¤. ê·¸ ë°©ë²•ì€ `__proto__`ì—†ì´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ê³§ë°”ë¡œ ë©”ì„œë“œë¥¼ ì“°ëŠ” ê²ƒì´ë‹¤.
```js
var suzi = new Person('Suzi');
suzi.getName(); // Suzi
var iu = new Person('Jieun');
iu.getName(); // Jieun
```
`__proto__`ë¥¼ ë¹¼ë©´ thisëŠ” instanceê°€ ë˜ëŠ”ê²Œ ë§ì§€ë§Œ ì´ëŒ€ë¡œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³  ì‹¬ì§€ì–´ ì›í•˜ëŠ” ê°’ì´ ë‚˜ì˜¤ëŠ” ê²ƒì€ ì¢€ ì´ìƒí•¨. ì´ìœ ëŠ” `__proto__` ê°€ **ìƒëµ ê°€ëŠ¥**í•œ í”„ë¡œí¼í‹°ì´ê¸° ë•Œë¬¸. ì›ë˜ë¶€í„° ìƒëµ ê°€ëŠ¥í•˜ë„ë¡ ì •ì˜ë¼ ìˆë‹¤. ê·¸ë¦¬ê³  ì´ ì •ì˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ JSì˜ ì „ì²´ êµ¬ì¡°ê°€ êµ¬ì„±ëë‹¤ê³  í•´ë„ ê³¼ì–¸ì´ ì•„ë‹˜. ê·¸ëŸ¬ë‹ˆê¹Œ 'ìƒëµ ê°€ëŠ¥í•œ í”„ë¡œí¼í‹°' ë¼ëŠ” ê°œë…ì€ ë¸Œëœë“  ì•„ì´í¬ì˜ ë¨¸ë¦¬ì—ì„œ ë‚˜ì˜¨ ì•„ì´ë””ì–´ë¡œ, ì´í•´ì˜ ì˜ì—­ì´ ì•„ë‹˜. ì–´ì¨Œë“  `__proto__` ê°€ ìƒëµ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ë§Œ ê¸°ì–µí•˜ë©´ ëœë‹¤.
```js
suzi.__proto__.getName
-> suzi(__proto__).getName
-> suzi.getName
```
`__proto__` ë¥¼ ìƒëµí•˜ì§€ ì•Šìœ¼ë©´ thisëŠ” `suzi.__proto__` ë¥¼ ê°€ë¦¬í‚¤ì§€ë§Œ, ì´ë¥¼ ìƒëµí•˜ë©´ suzië¥¼ ê°€ë¦¬í‚¨ë‹¤. `suzi.__proto__` ì— ìˆëŠ” ë©”ì„œë“œì¸ getNameì„ ì‹¤í–‰í•˜ì§€ë§Œ thisëŠ” suzië¥¼ ë°”ë¼ë³´ê²Œ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

![[assets/images/859402b5653653dec1b053448a799ef8_MD5.png]]

ì™¸ì›Œë¼. new ì—°ì‚°ìë¥¼ í†µí•´ Constructor í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ instanceê°€ ë§Œë“¤ì–´ì§€ëŠ”ë°, ì´ instanceì˜ ìƒëµ ê°€ëŠ¥í•œ í”„ë¡œí¼í‹°ì¸ `__proto__` ëŠ” Constructorì˜ prototypeì„ ì°¸ì¡°í•œë‹¤.

---

í”„ë¡œí† íƒ€ì…ì˜ ê°œë…ì„ ë” ìƒì„¸íˆ ë§í•´ë³´ì. ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” í•¨ìˆ˜ì— ìë™ìœ¼ë¡œ ê°ì²´ì¸ prototype í”„ë¡œí¼í‹°ë¥¼ ìƒì„±í•´ ë†“ëŠ”ë°, í•´ë‹¹ í•¨ìˆ˜ë¥¼ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì‚¬ìš©í•  ê²½ìš°, ì¦‰, new ì—°ì‚°ìì™€ í•¨ê»˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²½ìš°, ê·¸ë¡œë¶€í„° ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ìˆ¨ê²¨ì§„ í”„ë¡œí¼í‹°ì¸ `__proto__` ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì´ í”„ë¡œí¼í‹°ëŠ” ìƒì„±ì í•¨ìˆ˜ì˜ prototype í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•œë‹¤. `__proto__` í”„ë¡œí¼í‹°ëŠ” ìƒëµ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„ë¼ ìˆê¸° ë•Œë¬¸ì— **ìƒì„±ì í•¨ìˆ˜ì˜ prototypeì— ì–´ë–¤ ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹°ê°€ ìˆë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œë„ ë§ˆì¹˜ ìì‹ ì˜ ê²ƒì²˜ëŸ¼ í•´ë‹¹ ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤.**
```js
var Constructor = function (name) {
  this.name = name;
};
Constructor.prototype.method1 = function () {};
Constructor.prototype.property1 = 'Constructor Prototype Property';

var instance = new Constructor('Instance');
console.dir(Constructor);
console.dir(instance);
```
![[assets/images/38d5130f72dc25dc941c5f279bc887b4_MD5.png]]

Constructorì˜ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ì¶œë ¥í•´ë³´ë©´, í•¨ìˆ˜ë¼ëŠ” ì˜ë¯¸ì˜ fì™€ í•¨ìˆ˜ ì´ë¦„ì¸ Constructor, ì¸ì nameì´ ë³´ì¸ë‹¤. ê·¸ ë‚´ë¶€ì—ëŠ” ì˜…ì€ ìƒ‰ì˜ arguments, caller, length, name, prototype, `__proto__` ë“±ì˜ í”„ë¡œí¼í‹°ê°€ ë³´ì¸ë‹¤.

> â€» `[[ ]]` ë¡œ ê°ì‹¸ì§„ í”„ë¡œí¼í‹°ë“¤ì€ v8ì—”ì§„ì—ì„œ ë””ë²„ê¹…í•  ë•Œë§Œ í‘œì‹œí•´ì£¼ëŠ” ì •ë³´ë¡œ, ì½˜ì†”ì—ì„œëŠ” ì—´ì–´ë³¼ ìˆ˜ ìˆì§€ë§Œ ì‹¤ì œ ì½”ë“œ ìƒì—ì„œì˜ ì ‘ê·¼ì€ ë¶ˆê°€ëŠ¥ í•˜ë‹¤.
> 2023/2/3 ê¸°ì¤€ìœ¼ë¡œ í¬ë¡¬ì—ì„œ(ìœ„ ì‚¬ì§„) `__proto__` ëŠ” ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  `[[Prototype]]` ì„ í´ë¦­í•´ì„œ ë³´ë©´ ëœë‹¤.

ë‹¤ì‹œ prototypeì„ ì—´ì–´ë³´ë©´, ì½”ë“œ ìƒìœ¼ë¡œ ì¶”ê°€í•œ `methods1`, `proerty1` ì´ ì§™ì€ ìƒ‰ìœ¼ë¡œ ë³´ì´ê³ , constructor, `__proto__` ë“±ì´ ì˜…ì€ ìƒ‰ì´ë¡œ ë³´ì¸ë‹¤.

> ì´ëŸ° ìƒ‰ìƒ ì°¨ì´ëŠ” { enumerable: false } ì†ì„±ì´ ë¶€ì—¬ëœ í”„ë¡œí¼í‹°ì¸ì§€ ì—¬ë¶€ì— ë”°ë¥¸ë‹¤. ì§™ì€ ìƒ‰ì€ enumerable, ì¦‰ ì—´ê±° ê°€ëŠ¥í•œ í”„ë¡œí¼í‹°ì„ì„ ì˜ë¯¸í•˜ê³ , ì˜…ì€ìƒ‰ì€ innumerable, ì¦‰ ì—´ê±°í•  ìˆ˜ ì—†ëŠ” í”„ë¡œí¼í‹°ì„ì„ ì˜ë¯¸í•¨. for in ë“±ìœ¼ë¡œ ê°ì²´ì˜ í”„ë¡œí¼í‹° ì „ì²´ì— ì ‘ê·¼í•˜ê³ ì í•  ë•Œ ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„ì§€ì–´ í‘œê¸°í•¨.

ì´ì œ instance ì¶œë ¥ ê²°ê³¼ë¥¼ ë³´ë©´, Constructorê°€ ë‚˜ì˜¤ê³  ìˆë‹¤. ì–´ë–¤ ìƒì„±ì í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” í•´ë‹¹ ìƒì„±ì í•¨ìˆ˜ì˜ ì´ë¦„ì„ í‘œê¸°í•¨ìœ¼ë¡œì¨ í•´ë‹¹ í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì„ì„ í‘œê¸°í•˜ê³  ìˆë‹¤. Constructorë¥¼ ì—´ì–´ë³´ë©´ name í”„ë¡œí¼í‹°ê°€ ì§™ì€ ìƒ‰ìœ¼ë¡œ ë³´ì´ê³ , `__proto__` í”„ë¡œí¼í‹°ê°€ ì˜…ì€ ìƒ‰ìœ¼ë¡œ ë³´ì¸ë‹¤. ë‹¤ì‹œ `__proto__` ë¥¼ ì—´ì–´ë³´ë©´ method1, property1, constructor, `__proto__` ë“±ì´ ë³´ì´ëŠ” ê²ƒìœ¼ë¡œ ë´ì„œ Constructorì˜ prototypeê³¼ ë™ì¼í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

Arrayë¥¼ ë³´ì.
```js
var arr = [1, 2];
console.dir(arr);
console.dir(Array);
```
![[assets/images/65c40e91ad3a31046718f9ad87e54cc0_MD5.png]]

ì²«ë²ˆì§¸ ì‚¬ì§„ì—ì„œ ì²« ì¤„ì—ëŠ” Array(2) ë¼ê³  í‘œê¸° ë˜ì–´ ìˆë‹¤. Arrayë¼ëŠ” ìƒì„±ì í•¨ìˆ˜ë¥¼ ì›í˜•ìœ¼ë¡œ ì‚¼ì•„ ìƒì„±ë˜ì—ˆê³ , lengthê°€ 2ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.

> â€» null, undefinedë¥¼ ì œì™¸í•œ ëª¨ë“  ë°ì´í„° íƒ€ì…ì—ëŠ” ê·¸ì— ëŒ€ì‘í•˜ëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìˆë‹¤.
> ë¦¬í„°ëŸ´ ë°©ì‹ì˜ ë³€ìˆ˜ ì„ ì–¸ ë°©ì‹(`var arr = [1, 2]`)ê³¼ ìƒì„±ìë¥¼ ì´ìš©í•œ ë³€ìˆ˜ ì„ ì–¸ ë°©ì‹(`var arr = new Array(1, 2)`) ì˜ ë‘ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.

ì¸ë±ìŠ¤ì¸ 0, 1ì´ ì§™ì€ ìƒ‰ìƒìœ¼ë¡œ, lengthì™€ `__proto__`ê°€ ì˜…ì€ ìƒ‰ìƒ. `__proto__`ë¥¼ ì—´ì–´ë³´ë©´ ë‹¤ì–‘í•œ ë©”ì„œë“œë“¤ì´ ê¸¸ê²Œ í¼ì³ì§„ë‹¤. push, popë“± ë°°ì—´ì— ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ì´ ìˆë‹¤.

ë‘ë²ˆì§¸ ì‚¬ì§„ì—ì„œ ì²« ì¤„ì—ëŠ” í•¨ìˆ˜ë¼ëŠ” ì˜ë¯¸ì˜ fê°€ í‘œê¸° ëŒ. í•¨ìˆ˜ì˜ ê¸°ë³¸ì ì¸ í”„ë¡œí¼í‹°ë“¤ì¸ arguments, caller, length, name ë“±ì´ ì˜…ì€ ìƒ‰ìœ¼ë¡œ ë³´ì„. ë˜ëŠ” Array í•¨ìˆ˜ì˜ ì •ì  ë©”ì„œë“œì¸ from, isArray, of ë“±ë„ ë³´ì„ prototypeì„ ì—´ì–´ë³´ë©´ ì²«ë²ˆì¬ ì‚¬ì§„ì˜ `__proto__`ì™€ ì™„ì „íˆ ë™ì¼í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

ìœ„ ì¶œë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ë„ì‹ì„ ê·¸ë ¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![[assets/images/078c23d78b9cec3288cf0892d0c1f53f_MD5.png]]

Arrayë¥¼ new ì—°ì‚°ìì™€ í•¨ê²Œ í˜¸ì¶œí•´ì„œ instanceë¥¼ ìƒì„±í•˜ë“ , ê·¸ëƒ¥ ë°°ì—´ ë¦¬í„°ëŸ´ì„ ìƒì„±í•˜ë“ , ì–´ì¨‹ë“  instanceì¸ `[1, 2]` ê°€ ë§Œë“¤ì–´ì§„ë‹¤. ì´ ì¸ìŠ¤í„´ìŠ¤ì˜ `__proto__` Array.prototype ì„ ì°¸ì¡°í•˜ëŠ”ë°, `__proto__` ê°€ ìƒëµ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ë¼ ìˆê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ê°€ push, pop, forEach ë“±ì˜ ë©”ì„œë“œë¥¼ ë§ˆì¹˜ ìì‹ ì˜ ê²ƒì²˜ëŸ¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
í•œí¸ Arrayì˜ prototype í”„ë¡œí¼í‹° ë‚´ë¶€ì— ìˆì§€ ì•Šì€ from, isArray ë“±ì˜ ë©”ì„œë“œë“¤ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤.
```js
var arr = [1, 2];
arr.forEach(function () {});
Array.isArray(arr);
arr.isArray(); // TypeError: arr.isArray is not a function
```
<br/>

# Constructor í”„ë¡œí¼í‹°

ìƒì„±ì í•¨ìˆ˜ì˜ í”„ë¡œí¼í‹°ì¸ prototype ê°ì²´ ë‚´ë¶€ì—ëŠ” constructor ë¼ëŠ” í”„ë¡œí¼í‹°ê°€ ìˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ `__proto__`ë„ ë§ˆì°¬ê°€ì§€. ì´ í”„ë¡œí¼í‹°ëŠ” ë‹¨ì–´ ê·¸ëŒ€ë¡œ ì›ë˜ì˜ ìƒì„±ì í•¨ìˆ˜(ìê¸° ìì‹ )ì„ ì°¸ì¡°í•¨. ì¸ìŠ¤í„´ìŠ¤ë¡œë¶€í„° ê·¸ ì›í˜•ì´ ë¬´ì—‡ì¸ì§€ ì•Œ ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì´ê¸° ë•Œë¬¸ì— ì¡´ì¬.
```js
var arr = [1, 2];
Array.prototype.constructor === Array; // true
arr.__proto__.constructor === Array; // true
arr.constructor === Array; // true

var arr2 = new arr.constructor(3, 4);
console.log(arr2); // [3, 4]
```
ì¸ìŠ¤í„´ìŠ¤ì˜ `__proto__` ê°€ ìƒì„±ì í•¨ìˆ˜ì˜ prototype í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ë©° `__proto__` ê°€ ìƒëµ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì§ì ‘ constructorì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì´ ìƒê¸´ ê²ƒ.

í•œí¸ constructorëŠ” ì½ê¸° ì „ìš© ì†ì„±ì´ ë¶€ì—¬ëœ ì˜ˆì™¸ì ì¸ ê²½ìš°(ê¸°ë³¸í˜• ë¦¬í„°ëŸ´ ë³€ìˆ˜ - number, string, boolean)ë¥¼ ì œì™¸í•˜ê³  ê°’ì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
```js
var NewConstructor = function () {
  console.log('this is new constructor!');
};
var dataTypes = [
  1, // Number & false
  'test', // String & false
  true, // Boolean & false
  {}, // NewConstructor & false
  [], // NewConstructor & false
  function () {}, // NewConstructor & false
  /test/, // NewConstructor & false
  new Number(), // NewConstructor & false
  new String(), // NewConstructor & false
  new Boolean(), // NewConstructor & false
  new Object(), // NewConstructor & false
  new Array(), // NewConstructor & false
  new Function(), // NewConstructor & false
  new RegExp(), // NewConstructor & false
  new Date(), // NewConstructor & false
  new Error(), // NewConstructor & false
];

dataTypes.forEach(function (d) {
  d.constructor = NewConstructor;
  console.log(d.constructor.name, '&', d instanceof NewConstructor);
});
```
ëª¨ë“  ë°ì´í„°ê°€ `d instanceof NewConstructor` ëª…ë ¹ì— ëŒ€í•´ falseë¥¼ ë°˜í™˜í•œë‹¤. ì´ë¡œë¶€í„° constructorë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒì´ ë³€ê²½ë  ë¿ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤ì˜ ì›í˜•ì´ ë°”ë€ë‹¤ê±°ë‚˜ ë°ì´í„° íƒ€ì…ì´ ë³€í•˜ëŠ” ê²ƒì€ ì•„ë‹˜ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì ì •ë³´ë¥¼ ì•Œì•„ë‚´ê¸° ìœ„í•´ constructor í”„ë¡œí¼í‹°ì— ì˜ì¡´í•˜ëŠ”ê²Œ í•­ìƒ ì•ˆì „í•˜ì§€ëŠ” ì•Šì€ ê²ƒ.
ë¹„ë¡ ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ë¡œë¶€í„° ìƒì„±ì ì •ë³´ë¥¼ ì•Œì•„ë‚´ëŠ” ìœ ì¼í•œ ìˆ˜ë‹¨ì¸ constructorê°€ í•­ìƒ ì•ˆì „í•˜ì§€ëŠ” ì•Šì§€ë§Œ ì˜¤íˆë ¤ ê·¸ë ‡ê¸° ë•Œë¬¸ì— í´ë˜ìŠ¤ ìƒì†ì„ í‰ë‚´ ë‚´ëŠ” ë“±ì´ ê°€ëŠ¥í•´ì§„ ì¸¡ë©´ë„ ìˆìŒ.
```js
var Person = function (name) {
  this.name = name;
};
var p1 = new Person('ì‚¬ëŒ1');
var p1Proto = Object.getPrototypeOf(p1);
var p2 = new Person.prototype.constructor('ì‚¬ëŒ2');
var p3 = new p1Proto.constructor('ì‚¬ëŒ3');
var p4 = new p1.__proto__.constructor('ì‚¬ëŒ4');
var p5 = new p1.constructor('ì‚¬ëŒ5');

[p1, p2, p3, p4, p5].forEach(function (p) {
  console.log(p, p instanceof Person);
});

// Person { name: 'ì‚¬ëŒ1' } true
// Person { name: 'ì‚¬ëŒ2' } true
// Person { name: 'ì‚¬ëŒ3' } true
// Person { name: 'ì‚¬ëŒ4' } true
// Person { name: 'ì‚¬ëŒ5' } true
```
ë‹¤ì–‘í•œ constructor ì ‘ê·¼ ë°©ë²•ì„. p1~p5ì€ ëª¨ë‘ Personì˜ ì¸ìŠ¤í„´ìŠ¤ë‹¤.
```js
[Constructor]
[instance].__proto__.constructor
[instance].constructor
Object.getPrototypeOf([instance]).constructor
[Constructor].prototype.constructor
```
ë‹¤ìŒ ê° ì¤„ì€ ëª¨ë‘ ë™ì¼í•œ ëŒ€ìƒì„ ê°€ë¦¬í‚¨ë‹¤.
ë˜, ë‹¤ìŒ ê° ì¤„ì€ ëª¨ë‘ ë™ì¼í•œ ê°ì²´(prototype)ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
```js
[Constructor].prototype
[instance].__proto__
[instance]
Object.getPrototypeOf([instance])
```