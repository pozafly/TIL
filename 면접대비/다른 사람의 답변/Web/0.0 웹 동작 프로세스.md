# 웹 동작 프로세스

> [출처](https://velog.io/@0307kwon/%EC%9B%B9%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%A0%EA%B9%8C-1.-%EC%82%AC%EC%9A%A9%EC%9E%90%EA%B0%80-%EC%9B%B9%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A5%BC-%EB%B3%B4%EA%B8%B0%EA%B9%8C%EC%A7%80)

<br/>

## 최초 로딩

최초에는 브라우저가 html 파일만 가져와 읽어내려가고 필요한 파일을 만날 때마다 프로트 서버로 `http request` 를 보내 받아온다.

<br/>

## 전체적인 동작 구조

![동작구조](https://user-images.githubusercontent.com/59427983/116846548-73b4e580-ac23-11eb-902f-dae550468c9d.png)

## 기본 개념

### 웹 클라이언트

필요한 파일들(html, js, css) 를 받아 해석하고 사용자에게 보여주는 **브라우저**를 의미함.

### 웹 서버

클라이언트의 요청(url)에 따라 적절히 응답해주는 프로그램.

응답은 웹 구성요소 (html, css, js)일 수도 있고 DB의 데이터일 수도 있는데, 응답에 따라 웹서버는 2가지로 분류할 수 있다.

- 프론트 서버
  - 정적 or 동적인 페이지를 응답하기 위한 서버.
  - 웹이 비대해지면 서버의 역할 분담, 그리고 보안을 위해 `WAS` 와 `프론트 서버` 로 나누기도 한다.
- 백엔드 서버(or API 서버)
  - 사용자의 요청을 받았을 때 DB에서 적절한 데이터를 가져와 응답하기 위한 서버.

### DB

사용자의 목록, 정보 등 중요한 데이터들이 저장된 저장소

<br/>

<br/>

## 웹 페이지가 동작하는 원리

### MPA(Multiple Page Application)

전통적인 방신. `Multiple` 이라는 단어에서 보듯, 모든 페이지는 각각의 html로 이루어짐. 하나의 페이지에서 다른 페이지로 이동하려면 반드시 프론트 서버에 request를 보내고 원하는 페이지의 response를 받아야 함을 의미함.

이런 방식은 직관적이고 `SEO(Search Engine Optimization)` 에 대해 고민할 필요가 없지만 다음과 같은 단점이 있음.

- 페이지가 바뀔 때마다 매번 완전한 페이지를 응답으로 받는다. (필요한 부분만 응답으로 받는 방식에 비해 비효율적)
- 페이지가 바뀔 때마다 브라우저가 잠시 깜빡인다는 단점이 있음. (사용자 경험이 좋지 않다.)

이런 단점은 **모바일 기기**가 새롭게 등장하면서 더 부각됨. 모바일 기기가 등장했을 때 모바일은 PC의 성능 보다 훨씬 뒤떨어져 있었기 때문에 매번 새로운 페이지를 불러오는 MPA는 모바일 환경에서 부담임.

<br/>

### SPA(Sinple Page Application)

MPA가 Multiple이라면, SPA는 Single이다. 하나의 페이지(html)에서 모두 처리하는 방식. 먼저 사용자가 초기 url에 접근할 때 웹에서 이동가능한 모든 페이지에 대한 파일을 클라이언트로 받아옴. (그래서 초기 페이지 로딩이 오래 걸린다는 단점 존재)

그리고 페이지를 전환할 때 프론트 서버에 request를 보내는 것이 아닌 웹 클라이언트 자체적으로 js에 의해 전환됨.(js가 라우팅을 담당.)

페이지 내 동적으로 변해야하는 부분이 있는 경우 해당 정보만 백엔드 서버에 요청해 응답받고 웹에 갱신하는 구조. 결과적으로 하나의 페이지 내 여러 개의 페이지를 볼 수 있게 해준다.

단점으로는 `SEO` 검색 엔진 최적화가 어렵다는 것.

> 검색 엔진 최적화(SEO)는 웹 페이지 검색엔진이 자료를 수집하고 순위를 매기는 방식에 맞게 웹 페이지 구성해서 검색 결과의 상위에 나올 수 있도록 하는 작업을 말한다.

SEO가 어려운 이유는 SPA가 화면을 띄우는데 js가 사용되고 SEO를 위한 웹 크롤러는 대부분 js를 해석하지 못하기 때문. 솔루션으로는 첫 페이지만 모두 만들어진 사이트를 사용하는 SSR(Server Side Rendering)을 이용하는 방법.