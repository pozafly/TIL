# HTTP VS HTTPS

> 출처 : https://velog.io/@hygoogi/%EA%B8%B0%EC%88%A0%EB%A9%B4%EC%A0%91-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0

<br/>

HTTP + SSL = HTTPS

<br/>

HTTP는 평문 통신이다. TCP/IP 특성상 도청이 가능하며, 통신 상태를 확인하지 않기 때문에 위장이 가능. 예를 들어 IP가 A인 사람한테 보내고 싶은데, 해커가 IP를 A라고 말해도 검증할 방법이 없다. 또한 완전성을 증명할 수 없기 때문에 변조가 가능함. 

보안 방법은 통신 자체를 암호화(SSL, TLS) 하거나, 콘텐츠 자체(HTTP 메세지 콘텐츠)를 암호화 하는 것이다. 도청이 가능한 문제, 사용자를 확인할 수 없다는 문제, 정확성을 보장할 수 없다는 문제를 모두 해결할 방안으로 나온 것이 HTTPS 다.

HTTPS는 새로운 프로토콜이 아닌, HTTP에서 SSL 개념을 더한 프로토콜임. 기존 HTTP는 TCP와 직접 통신했지만, HTTPS는 HTTP와 TCP 사이에 SSL, TLS가 끼워져 있는 것. HTTP는 SSL과 통신하고, SSL은 TCP와 통신하게 된다.

<br/>

## SSL의 원리

SSL의 원리를 간략하게 설명하면, 대칭키와 공개키 방식 두 암호화 방식 모두를 사용하는데, 먼저 클라이언트가 서버에게 HEELO 메세지를 보내면, 서버가 클라이언트에게 HELLO 메세지를 보내면서, 서버 안호화 된 인즈어와 랜덤 데이터를 넘겨주게 된다. 

HELLO 과정에서 어떤 암호화 프로토콜을 사용할 것인지 협상한다. 클라이언트는 받은 인증서를 CA 리스트에서 조회 후 CA 공개키를 사용해 인증서를 복호화 한다. 복호화에 성공하면 이 서버는 신뢰할 수 있는 서버이다. 

서버가 보낸 랜덤 데이터와 클라이언트의 랜덤 데이터를 조합해 대칭키를 생성한다. 서버로부터 받은 공개키(인증서)를 사용하여 대칭키를 암호화 후, 서버에게 보내게 된다. 서버는 암호화된 대칭키를 받고, 비밀키로 복호화 함으로 서버와 클라이언트가 서로 대칭키를 가지게 된다. 이 대칭키로 통신을 암호화 함.



