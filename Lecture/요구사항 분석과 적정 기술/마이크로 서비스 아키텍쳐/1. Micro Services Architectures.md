# Micro Services Architectures

MSA <-> 모놀리틱

모놀리틱은 한 서비스에 다 들어있는 경우.

- 구현 속도는 빠르다.
- 코드 베이스가 크다.
- 따라서 스파게티 코드가 생성된다. 한 페이지에서 결제를 어디까지 봐야해? 이런 경우
- 초기 스타트업에서 사용하는 경우가 많다.
- 어느 레이어가 죽으면 다같이 죽는다.

MSA

- 서비스를 잘게 쪼갠다.
- 상품, 결제, 장바구니 등 서비스를 쪼개고, 각자 관리하도록 함.
- 상품 서비스가 죽어도 결제, 장바구니는 살아있다.
- 관심사 분리가 이루어짐. -> 레이어 격리
- 서비스 사이에 인터페이스가 필요함.
- 조직 구조가 나누어져 개별 조직 단위 운용 가능.
- 단 단위 서비스 별 모니터링은 따로 하는 경우가 많다.

<br/>

프론트엔드 입장에서는 각 레이어에 api를 각각 찌를 수도 있지만 주로 API Gateway(중간 매개자)를 두고 같은 endpoint를 찌르면 API Gateway 에서 각 서버로 연결시켜주는 구조를 사용하는 경우가 많음.

프론트엔드 입장에서 API Gateway가 살아만 있으면, 통신을 할 수 있기 때문에 API Gateway가 굉장히 중요한 역할을 한다. 그것을 관리하는게 프론트엔드 입장에서 중요한 이슈가 된다. API Gateway는 중개만 해주기 때문에 대용량 트래픽에 잘 견딜 수 있도록 만들어져 있다.

각 서버는 어떤 아키텍쳐를 가지고 있는지 알 필요 없음.

우리가 알아야 하는 것은 API Gateway는 다음과 같은 역할을 함. 

- Aggregation -> 집계(api 모아줌)
- Scaling -> 트래픽 조절
- Auth -> 인증

각 레이어에서 api endpoint가 다를 수 있다. 결제는 pay.뭐뭐, 상품은 product.뭐뭐... 프론트엔드 입장에서는 이것들을 모두 관리해주어햐 함. 따라서 gateway에서 관리하도록 해주는게 좋다.

api에 대해서는 어떤 데이터가 내려오면 돼. 이것만 생각하게 해야함.