# Accordion

```tsx
const AccordionItem = ({
  id,
  title,
  description,
  current,
  toggleItem,
}: {
  id: string;
  title: string;
  description: string;
  current: boolean;
  toggleItem: (id: string) => void;
}) => {
  return (
    <li className={cx('item', { current })} key={id}>
      <div className={cx('tab')} onClick={() => toggleItem(id)}>
        {title}
      </div>
      {current ? <div className={cx('description')}>{description}</div> : null}
    </li>
  );
};

export const Accordions1 = () => {
  const [currentId, setCurrentId] = useState<string | null>(data[0].id);
  const toggleItem = (id: string) => {
    setCurrentId((prev) => (prev === id ? null : id));
  };

  return (
    <div>
      <h3>#1. React</h3>
      <ul className={cx('container')}>
        {data.map((d) => (
          <AccordionItem
            {...d}
            key={d.id}
            current={currentId === d.id}
            toggleItem={toggleItem}
          />
        ))}
      </ul>
    </div>
  );
};
```

ë¦¬ì•¡íŠ¸ë¡œ ë§Œë“¤ì—ˆë‹¤.

- `currentId` ë¥¼ ë‘ê³  í† ê¸€í•œë‹¤.
- ë‹¨ìˆœíˆ DOMì— ë Œë”ë§ í•˜ëŠ”ì§€ í•˜ì§€ ì•ŠëŠ”ì§€ë§Œ íŒë‹¨í•œë‹¤.

í•˜ì§€ë§Œ, ì•„ë˜ ì»´í¬ë„ŒíŠ¸ì— ê³„ì† `toggleItem` ì„ ë„˜ê¸°ê³  ì‹¶ì§€ëŠ” ì•Šë‹¤. ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜?

```tsx
const AccordionItem = ({
  toggle,
}: {
  toggle: () => void;
}) => {
  return (
    <div className={cx('tab')} onClick={toggle}>
      {title}
    </div>
  );
};

export const Accordions1 = () => {
  const toggleItem = (id: string) => () => { // here
    setCurrentId((prev) => (prev === id ? null : id));
  };
  return (
    {data.map((d) => (
      <AccordionItem
        toggle={toggleItem(d.id)} // here
      />
    ))}
  );
};
```

ì´ë ‡ê²Œ `toggleItem` í•¨ìˆ˜ì— í´ë¡œì €ë¥¼ ìƒì„±í•´ì£¼ê³ , í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— toggleItemì„ ë°”ë¡œ ë„£ì–´ì£¼ëŠ” í˜•íƒœë¡œ í•œë‹¤.

í•˜ì§€ë§Œ ìœ„ì˜ ë°©ë²•ì€, ê²€ìƒ‰í•´ë„ ê²€ìƒ‰ì´ ì•ˆëœë‹¤. ê²€ìƒ‰ì´ ì•ˆëœë‹¤ëŠ” ê²ƒì€ SEO ì¸¡ë©´ì—ì„œë„ ì¢‹ì§€ ì•Šì€ ê²ƒì´ë‹¤. DOMì— ë“œë ¤ì§€ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ¼ ìˆ¨ê¹€ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.

```tsx
<li className={cx('item', 'item2', { current })} key={id}>
  <div className={cx('tab')} onClick={toggle}>
    {title}
  </div>
  <div className={cx('description')}>{description}</div> // ì´ ë¶€ë¶„ì„ í’€ì–´ì¤€ë‹¤.
</li>
```

ê·¸ë¦¬ê³ , cssë¡œ `display: none`, `display: block` ìœ¼ë¡œ í’€ì–´ì£¼ë©´ ëœë‹¤.

<br/>

## JavaScript

```tsx
const ItemBuilder = ({
  id,
  title,
  description,
}: {
  id: string;
  title: string;
  description: string;
}) => {
  const $li = document.createElement('li');
  $li.classList.add(cx('item'), cx('item3'));
  $li.setAttribute('data-id', id);

  const $tab = document.createElement('div');
  $tab.classList.add(cx('tab'));
  $tab.textContent = title;

  const $description = document.createElement('div');
  $description.classList.add(cx('description'));
  $description.textContent = description;

  $li.append($tab, $description);
  return $li;
};

const initiator = (wrapper: HTMLDivElement) => {
  let currentId: string | null = null;

  const $ul = document.createElement('ul');
  $ul.classList.add(cx('container'));

  const handleClickTab = (e: Event) => {
    const $el = e.target as HTMLElement;
    if (!$el.classList.contains(cx('tab'))) return;

    const targetId = $el.parentElement!.dataset.id;
    if (!targetId) return;

    currentId = targetId === currentId ? null : targetId;

    $items.forEach(($item) => {
      $item.classList.toggle(cx('current'), currentId === $item.dataset.id);
    });
  };
  $ul.addEventListener('click', handleClickTab);

  const $items = data.map(ItemBuilder);
  $ul.append(...$items);
  ($items[0].children[0] as HTMLElement).click();

  wrapper.append($ul);
};

export const Accordions4 = () => (
  <VanillaWrapper title="#4 Vanilla" initiator={initiator} />
);
```

`ItemBuilder` ê°€ children componentë‹¤. ë‹¨ì§€ Reactì˜ ê³¼ì •ì„ createElementë¡œ ë”°ë¼ í–ˆì„ ë¿.

- `currentId` ëŠ” `let` ìœ¼ë¡œ ì„ ì–¸í•œ ìƒíƒœ ê°’ ì—­í• ì„ í•˜ê³  ìˆë‹¤.
- ê·¸ë¦¬ê³ , `addEventListener` ë¡œ click ì´ë²¤íŠ¸ë¥¼ `ul` ì—ì„œ ì¡ì•„ì„œ ì´ë²¤íŠ¸ ìœ„ì„ ê¸°ë²•ì„ ì“°ê³  ìˆìŒ.

<br/>

## Only HTML

```tsx
import { useState } from 'react';
import cx from './cx';
import data from './data';

const AccordionItem = ({
  id,
  title,
  description,
  initialChecked,
}: {
  id: string;
  title: string;
  description: string;
  initialChecked: boolean;
}) => {
  return (
    <li className={cx('item', 'item5')} key={id}>
      <input
        className={cx('input')}
        type="radio"
        name="accordion"
        id={id}
        defaultChecked={initialChecked} // here
      />
      <label htmlFor={id} className={cx('tab')}>
        {title}
      </label>
      <div className={cx('description')}>{description}</div>
    </li>
  );
};

export const Accordions5 = () => {
  return (
    <div>
      <h3>
        #5. HTML <sub>html input(radio)ë¡œ ì²˜ë¦¬</sub>
      </h3>
      <ul className={cx('container')}>
        {data.map((d, i) => (
          <AccordionItem {...d} key={d.id} initialChecked={i === 0} />
        ))}
      </ul>
    </div>
  );
};
```

- ìƒíƒœ ê°’, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì „ë¶€ ì§€ìš´ë‹¤.
- ê·¸ë¦¬ê³  `input radio` ë¥¼ ì„ ì–¸í•˜ê³ , labelì— id, forë¡œ ë§¤ì¹­ì‹œì¼œì¤€ë‹¤.
- ğŸ“Œ ê°€ì¥ ì²« ë²ˆì§¸ ê²ƒì´ ì„ íƒë˜ì–´ ìˆë‹¤ê³  í•˜ë©´, inputì— `defaultChecked` ë¥¼ ë„£ì–´ì£¼ë©´ ëœë‹¤. `checked` ê°€ ì•„ë‹ˆë‹¤!
  - ì´ëŠ” reactì˜ attributeë‹¤. í“¨ì–´í•œ htmlì—ì„œëŠ” ê·¸ëƒ¥ `checked` ë‹¤.
- css ë¥¼ ì¤€ë‹¤.

```css
.item5 {
  overflow: hidden;

  .input {
    display: none;
  }
  .tab {
    display: block;
  }
  .description {
    padding: 0 15px;
    border-bottom-width: 0;
    max-height: 0;
    transition: ease 0.3s;
  }
  .input:checked {
    + .tab {
      background-color: #ace;

      &::before {
        content: '-';
      }
    }
    ~ .description {
      padding: 15px;
      border-bottom-width: 1px;
      max-height: 300px;
    }
  }
}
```

- input ê¸°ë³¸ ìŠ¤íƒ€ì¼ì€ display none ì´ì§€ë§Œ, `input:checked` ì¼ ë•ŒëŠ” ë³´ì´ë„ë¡ í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

---

HTMLë¡œ, ë°˜ë“œì‹œ í•˜ë‚˜ë§Œ ì—´ë¦¬ì§€ ì•Šê³  ì „ë¶€ ë‹¤ ì—´ë¦¬ê²Œ í•œë‹¤ë©´, `<details>` `<summery>` íƒœê·¸ë¥¼ ì‚¬ìš©í•´ë„ ì¢‹ë‹¤. CSSë¥¼ ì•ˆì¨ë„ ëœë‹¤.

---

## ì•ˆ ë³´ì´ëŠ” ë¶€ë¶„ ê²€ìƒ‰ í•˜ë„ë¡ ë§Œë“¤ê¸°

https://hiddenest.dev/accessible-accordion

```tsx
const AccordionItem = ({
  id,
  title,
  description,
  current,
  toggle,
}: {
  id: string;
  title: string;
  description: string;
  current: boolean;
  toggle: () => void;
}) => {
  const descRef = useRef<null | HTMLDivElement>(null);

  useEffect(() => {
    if (descRef.current) {
      descRef.current.addEventListener('beforematch', toggle);
    }
    return () => {
      if (descRef.current) {
        descRef.current.removeEventListener('beforematch', toggle);
      }
    };
  }, [toggle]);

  return (
    <li className={cx('item', 'item3', { current })} key={id}>
      <div className={cx('tab')} onClick={toggle}>
        {title}
      </div>
      <div
        className={cx('description')}
        ref={descRef}
        HIDDEN={current ? undefined : 'until-found'}
      >
        {description}
      </div>
    </li>
  );
};
```

ë™ì¼í•˜ë‹¤. í•˜ì§€ë§Œ, `beforematch` ì´ë²¤íŠ¸ë¥¼ ê±¸ì–´ì£¼ì—ˆê³ , `HIDDEN` ì´ë¼ëŠ” attributeë¥¼ ë„£ì–´ì¤Œ. `hidden` ì€ HTML ìŠ¤íŒ©ì´ì§€ë§Œ, reactì—ì„œ êµ¬í˜„ë˜ì–´ ìˆì§€ ì•Šê³  react ë‹¨ì—ì„œ ë³´ì•ˆì„ ìœ„í•´ ì—†ì• ë²„ë¦¬ê¸° ë•Œë¬¸ì— ë„£ì–´ì¤€ attributeë‹¤.
