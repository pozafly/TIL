# 0.1 테스트란?

#Testing

## 테스트란?

소프트웨어 테스트를 하는 것을 말함. 제품이 예상하는 대로 동작하는지 확인.
함수, 특정한 기능, UI, 성능, API 스펙.

- 제품 or 서비스의 품질을 확인
- 소프트웨어의 버그를 찾음

expectation(예상, 기대) -> requirements(자격 요건)

<br/>

## 언제 테스트를 해야하나?

QA를 하면 검증 비용과 시간이 많이 투자가 된다. 검증 자체를 자동화하는 방향으로 발전 함. 병목 현상도 존재 한다. 문제가 뒤늦게 발생하기도 함.

개발 자동화는 속도가 빠르고 쉽게 작성된다. 높은 커버리지도 가짐. qa팀은 여전히 필요함. 사용자 입장에서 qa를 해야하기 때문임.

<br/>

## 테스트를 하는 이유? 장점?

- 기능이 정상 동작
- 요구사항 만족
- 이슈에 대해 예측
- 버그를 빠르게 발견
- 자신감 있게 리팩토링
- 손쉬운 유지 보수
- 코드의 품질 향상
- 코드간 의존성을 낮춤(디커플링)
- 좋은 문서화
- 개발 시간 절약

<br/>

## 테스트 피라미드

<img width="560" alt="image" src="https://user-images.githubusercontent.com/59427983/193519697-2615617f-1d44-4760-9b5b-db2de9514d92.png">

- Unit Test: 단위 테스트
	- 함수, 모듈, 클래스 등의 딱 하나의 단위를 테스트 하는 것.
- Integration Test: 통합 테스트
	- 하나의 단위가 아니라 여러 단위를 하나로 묶어 테스트함. 상호작용을 테스트 함.
	- 모듈들, 클래스들.
- E2E Test: UI 테스트, 사용자 테스트
	- 사용자가 실제로 사용하는 소프트웨어를 테스트. 플로우를 테스트함.

### 피라미드의 장단점

Unit Test -> E2E Test
- 비용 증가
- 개발 속도가 느려짐.

따라서, Unit Test가 가볍기 때문에 가장 많이 작성한다. 하지만, Unit Test만 작성한다고 하면 안된다. 한 단위만 테스트만 해서는 안된다.

※ 추가로 Contract Test, A/B Test, Stress Test 등이 있다.

<br/>

## TDD란 무엇인가?

Test-driven development: 테스트 주도 개발
: 개발(코드 작성) 전 테스트 코드를 먼저 작성.

Write the Test -> Run Tests -> fail -> write only enough code -> run Tests -> sucess

장점
- 요구 사항 분석 및 이해 -> 설계
- 모든 요구 사항(목표)에 대해 점검
- 사용자 입장에서 코드를 작성
다시 말하면, 내부 구현 사항 보다는, 인터페이스 위주로 코드를 작성하기 때문에 코드의 퀄리티 향상. 따라서 시스템 전반적인 설계 향상. 개발 집중력 향상.<br/>

## TDD 모든 개발자들이 다 해야할까?

팀바팀임. 강제할 수는 없음. 기능 구현 마치고 테스트 코드를 작성할 수도 있음.
다만, 코드 리뷰 전, 배포 전에는 testing code를 포함해 merge를 해야 함.
좋은 문서화의 효과를 가져갈 수 있기 때문임.

그럼 언제 사용해야함?
- 요구사항이 명확할 때
- 비지니스 로직
- 협업시 명세서(문서) 역할
- 설계에 대한 고민이 필요

UI를 만들 때는 TDD를 잘 하지 않음.
- 일단 UI를 먼저 만들어두고 작업하기 때문. 따라서 후에 비주얼 테스트 등을 함. No TDD인 것임.
- UI 상에 있는 모든 로직들을 다 UI에 섞어서 두지 않기 때문에.

<br/>

## CI / CD 에서의 테스트

CODE -> BUILD -> TEST -> RELEASE -> DEPLOY

CI/CD 에서 가장 중요하게 여겨지는 것은, 모든 코드에 대한 test 코드가 있다는 사실을 가정하고 있다는 것.
1. 코드 변경사항을 주기적으로 빈번하게 머지해야 한다.
2. 통합을 위한 단계 (빌드, 테스트, 머지)의 자동화.
	- 여기서는 기존에 작성되고 pass된 test 코드 뿐 아니라, 이번 추가된 test 코드도 pass가 되는지 검증된다. (자동적으로)

<br/>

## 용어

- Test Runner
	- 테스트 코드를 수행하는 역할은 Test Runner가 한다. Test Runner는 테스트를 실행후 결과를 생성해낸다.
	- Mocha 등의 라이브러리
- Assertion
	- 테스트 코드 안에서 비교하는것. 테스트 조건, 비교를 통한 테스트 로직을 검증.
	- Chai, expect.js, better-assert 등의 라이브러리

이렇게 이전에는 Test Runner, Assertion의 라이브러리가 따로 존재. 하지만, 요즘은 Jest 라는 라이브러리 하나로, Test Runner, Assertion이 통합되어 제공됨.
