# 개요

Vue3에 필요한 상태 관리 라이브러리.

<br/>

## 특징

- 직관적
  - 스토어는 컴포넌트만큼 친숙하다. 잘 정리된 스토어를 작성할 수 있도록 API가 디자인 되었음.
- 유형보호(Type Safe)
  - type이 유추 되기 때문에 JavaScript에서도 스토어 자동 완성 기능이 제공된다.
- Devtools 지원
  - pinia는 vue devtools에 연결해 2,3 모두에서 지원
- 확장 가능
  - 트랜잭션, 로컨 스토리지 동기화 등 확장한 pinia의 스토어 변경 사항에 반응한다.
- 모듈식 디자인
  - 여러 스토어를 구축, 번들러 코드가 자동으로 스토어를 분할하도록 한다.
- 매우 가벼움
  - 약 ~1.5kB.

<br/>

## 왜 pinia인가?

Vue의 스토어 라이브러리로 컴포넌트/페이지 간 상태를 공유할 수 있다. 컴포지션 API에 익숙하다면 `export const state = reactive({})` 로 전역 상태를 공유할 수 있다고 생각할 수 있다. 이는 SPA에는 해당되지만, SSR 경우 **앱이 [보안 취약성](https://vuejs.kr/guide/scaling-up/ssr.html#cross-request-state-pollution)에 노출된다.**

그러나 작은 SPA에서도 피니아를 사용하면 이점이 있다.

- Devtools 지원
  - actions, mutations를 추적하는 타임라인
  - 스토어는 사용되는 컴포넌트에 표시됨.
  - 시간 추적 및 더 쉬운 디버깅
- 핫 모듈 교체 (HMR)
  - 페이지를 새로고침하지 않고 스토어 수정
  - 개발하는 동안 기존 상태 유지
- 플러그인: 플러그인으로 피니아 기능 확장
- TypeScript 지원 또는 JS 사용자를 위한 적절한 **자동 완성**
- SSR 지원

<br/>

## Vuex와 비교

피니아는 Vuex5 핵심 팀 토론의 아이디어를 통합, Vuex의 다음 버전이 어떤 모습일지 탐구하는 것으로 시작함. Vuex와 비교할 때, 피니아는 더 간단한 API를 제공, 컴포지션 API 스타일을 제공하고, 가장 중요한 것은 TypeScript와 함께 견고한 type 추론을 지원한다.

### RFCs

처음 피니아는 RFC 프로세스를 거치지 않았음. 디스코드에서 토론하며 완성되었고, 자주 배포함. 이제는 Vue 기본 상태 관리 솔류션이 되었고, Vue 생태계의 다른 핵심 라이브러리와 동일한 RFC 프로세스를 거친다.

### Vuex4 와 비교

- `mutation` 은 존재하지 않음. 장황하기 때문임.
- TypeScript를 지원하기 위해 커스텀 래퍼를 만들 필요 없음. 최대한 추론을 사용할 수 있도록 함.
- 스토어를 동적 추가하지 않아도 된다. 기본적으로 모두 동적으로 작동함. 원할 때마다 수동으로 스토어를 사용해 등록할 수 있지만, 자동이기 때문에 걱정이 필요 없음.
- 더 이상 모듈 중첩 구조가 없음. 스토어를 가져오고 다른 스토어 내부에 사용해 여전히 스토어를 암시적으로 중첩할 수 있지만, 피니아는 수평적으로 디자인한 구조를 제공하는 동시에 스토어 간 교차 구성 방법이 있음. 스토어의 순환 종속성을 가질 수도 있음.
- 네임스페이스 모듈이 없음. 스토어의 수평적 이키텍처를 고려할 때, '네임스페이스' 스토어는 정의된 방식에 내재되어 있고, 모든 스토어가 네임스페이스라고 말할 수 있음.
