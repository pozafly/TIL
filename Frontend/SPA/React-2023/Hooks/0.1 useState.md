# useState

컴포넌트에 state 변수를 추가할 수 있게 해주는 React 훅이다.

> `const [state, setState] = useState(initialState);`

## initialState

초기에 state를 설정할 값이다. 값은 모든 데이터 타입이 허용되지만, 함수에 대해서는 특별한 동작이 있다. 이 인자는 초기 렌더링 이후에는 무시된다.

- 함수를 `initalState`로 전달하면 이를 초기화 함수로 취급한다. 이 함수는 순수해야 하고 인자를 받지 않아야 하며 반드시 어떤 값을 반환해야 한다. React는 컴포넌트를 초기화 할 때 초기화 함수를 호출하고, 그 반환 값을 초기 state로 저장한다.

### 반환 값

두 개의 배열을 반환한다.

1. state
2. set 설정자 함수.

### 주의사항

- useState는 훅이기 때문에 컴포넌트의 최상위 레벨이나 직접 만든 훅에서만 호출할 수 있다. 반복문이나 조건문 안에서는 호출할 수 없다.
- Strict Mode에서 의도치 않은 불순물을 찾기 위해 초기화 함수를 두 번 호출한다. 초기화 함수가 순수하다면 동작에 영향을 미치지 않는다.

<br />

## setSomething과 같은 `set` 함수

useState가 반환하는 set 함수를 사용하면 state를 다른 값으로 업데이트 하고 리렌더링을 트리거 한다. 값을 넣을 수 있고, 함수를 전달할 수도 있다.

함수를 setState에 전달하면 업데이터 함수로 취급한다. 대기중인 state를 유일한 인수로 사용해야 하고, 다음 state를 반환해야 한다.

### 주의사항

- Object.is에 의해 현재 state와 동일하다 판단하면, 컴포넌트와 그 자식들을 리랜더링 하지 않는다.
- state 업데이트를 일괄처리한다. 모든 이벤트 핸들러가 실행되고, set 함수를 호출한 후에 화면을 업데이트 한다. 이렇게 하면 단일 이벤트 중에 여러 번 리렌더링 되는 것을 방지할 수 있다. 드물지만 DOM에 접근하기 위해 React가 화면을 더 일찍 업데이트 하도록 강제해야 하는 경우, `flushSync` 를 사용할 수 있다.
- 렌더링 도중 set함수를 호출하는 것은 현재 렌더링 중 컴포넌트 내에서만 호용된다. react는 해당 출력을 버리고 즉시 새로운 state로 다시 렌더링을 시도 한다. **이 패턴은 거의 필요하지 않지만 이전 렌더일 정보를 저장하는데 사용할 수 있다.**

key로 state를 재설정 할 수 있다.
