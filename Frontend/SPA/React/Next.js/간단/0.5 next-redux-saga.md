# Next-redux-saga

nextì—ì„œ ë¦¬ë•ìŠ¤ ì‚¬ê°€ë¥¼ ì…íˆëŠ” ë°©ë²•ì€ ê¸°ì¡´ reactì™€ ë˜ ë‹¤ë¥´ë‹¤.

```sh
$ npm i redux-saga next-redux-saga
```

ê·¸ë¦¬ê³  ê¸°ì¡´ì— ì„¤ì •í•´ë’€ë˜ store ì„¤ì •ë¶€ë¶„ì— ê°€ì„œ, (store/configureStore.js)

```js
import { createWrapper } from 'next-redux-wrapper';
import { applyMiddleware, compose, createStore } from 'redux';
import { composeWithDevTools } from 'redux-devtools-extension';
import reducer from '../reducers';
import createSagaMiddleware from 'redux-saga';   // ğŸŒˆ
import rootSaga from '../sagas';   // ğŸ‘»

const loggerMiddleware = ({ dispatch, getState }) => (next) => (action) => {
  console.log(action);
  return next(action);
};

const configureStore = () => {
  const sagaMiddleware = createSagaMiddleware();   // ğŸŒˆ
  const middlewares = [sagaMiddleware, loggerMiddleware];   // ğŸŒˆ
  const enhancer =
    process.env.NODE_ENV === 'production'
      ? compose(applyMiddleware(...middlewares))
      : composeWithDevTools(applyMiddleware(...middlewares));
  const store = createStore(reducer, enhancer);
  store.sagaTask = sagaMiddleware.run(rootSaga);   // ğŸ‘»
  return store;
};

const wrapper = createWrapper(configureStore, {
  debug: process.env.NODE_ENV === 'development',
});

export default wrapper;
```

- ğŸŒˆ: ì´ ë¶€ë¶„ì´ ì¶”ê°€ë˜ì—ˆë‹¤.
- ğŸ‘»: rootSagaëŠ” ë§Œë“¤ì–´ì„œ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

ê·¸ë¦¬ê³ , `_app.js`ì— ê¸°ì¡´ì— ìˆë˜ reduxì— ë¶™ì—¬ì£¼ì. `pages/_app.js`

```js
// ...
import withReduxSaga from 'next-redux-saga';
// ...
export default wrapper.withRedux(withReduxSaga(NodeBird));
```

ì´ì œ, rootSagaë¥¼ ë§Œë“¤ì–´ë³´ì. ìµœìƒìœ„ í´ë”ì— sagas/index.js

```js
import { all, fork, call, put } from 'redux-saga';

export default function* rootSaga() {}
```

ì—¬ê¸°ë‹¤ê°€ ì´ì œ ì‚¬ê°€ë¥¼ ì ì–´ì¤„ ê²ƒì´ë‹¤.
