# redux-actions

redux-actionsλ¥Ό μ‚¬μ©ν•λ©΄ μ•΅μ… μƒμ„± ν•¨μλ¥Ό λ” μ§§μ€ μ½”λ“λ΅ μ‘μ„±ν•  μ μλ‹¤. λ¦¬λ“€μ„λ¥Ό μ‘μ„±ν•  λ•λ„ swich / case λ¬Έμ΄ μ•„λ‹ `handleActions` λΌλ” ν•¨μλ¥Ό μ‚¬μ©ν•΄ κ° μ•΅μ…λ§λ‹¤ μ—…λ°μ΄νΈ ν•¨μλ¥Ό μ„¤μ •ν•λ” ν•μ‹μΌλ΅ μ‘μ„±ν•  μ μμ.

```sh
$ yarn add redux-actions
```

<br/>

## counter λ¨λ“μ— μ μ©ν•κΈ°

```js
// modules/counter.js
import { createAction } from 'redux-actions';

const INCREASE = 'counter/INCREASE';
const DECREASE = 'counter/DECREASE';

export const increase = createAction(INCREASE);
export const decrease = createAction(DECREASE);
//...
```

`createAction` μ„ μ‚¬μ©ν•λ©΄, λ§¤λ² κ°μ²΄λ¥Ό μ§μ ‘ λ§λ“¤μ–΄ μ¤„ ν•„μ” μ—†μ΄ κ°„λ‹¨ν•κ² μ•΅μ… μƒμ„± ν•¨μλ¥Ό μ„ μ–Έν•  μ μλ‹¤.

μ΄λ²μ—λ” λ¦¬λ“€μ„ ν•¨μλ„ λ” κ°„λ‹¨ν•κ³  κ°€λ…μ„± λ†’κ² μ‘μ„±ν•΄λ³΄μ. `handleActions` λΌλ” ν•¨μλ¥Ό μ‚¬μ©ν•λ‹¤.

```js
import { createAction } from 'redux-actions';

const INCREASE = 'counter/INCREASE';
const DECREASE = 'counter/DECREASE';

export const increase = createAction(INCREASE);
export const decrease = createAction(DECREASE);

const initialState = {
  number: 0,
};

// function counter(state = initialState, action) {
//   switch (action.type) {
//     case INCREASE:
//       return {
//         number: state.number + 1,
//       };
//     case DECREASE:
//       return {
//         number: state.number - 1,
//       };
//     default:
//       return state;
//   }
// }
const counter = handleActions(
  {
    [INCREASE]: (state, action) => ({ number: state.number + 1 }),
    [DECREASE]: (state, action) => ({ number: state.number - 1 }),
  },
  initialState,
);

export default counter;
```

handleActions ν•¨μμ μ²«λ²μ§Έ νλΌλ―Έν„°μ—λ” κ° μ•΅μ…μ— λ€ν• μ—…λ°μ΄νΈ ν•¨μλ¥Ό λ„£μ–΄μ£Όκ³ , λ‘ λ²μ§Έ νλΌλ―Έν„°μ—λ” μ΄κΈ° μƒνƒλ¥Ό λ„£μ–΄μ¤€λ‹¤.

<br/>

## todos λ¨λ“μ— μ μ©ν•κΈ°

μ—¬κΈ°λ” κ° μ•΅μ… μƒμ„± ν•¨μμ—μ„ νλΌλ―Έν„°λ¥Ό ν•„μ”λ΅ ν•λ‹¤. createActionμΌλ΅ μ•΅μ…μ„ λ§λ“¤λ©΄, μ•΅μ…μ— ν•„μ”ν• μ¶”κ°€ λ°μ΄ν„°λ” `payload` λΌλ” μ΄λ¦„μ„ μ‚¬μ©ν•λ‹¤.

μλ¥Όλ“¤λ©΄,

```js
const MY_ACTION = 'sample/MY_ACTION';
const myAction = createAction(MY_ACTION);
const action = myAction('hello world');
/*
  κ²°κ³Ό:
  { type: MY_ACTION, payload: 'hello world' }
*/
```

μ•΅μ… μƒμ„± ν•¨μμ—μ„ λ°›μ•„ μ¨ νλΌλ―Έν„°λ¥Ό κ·Έλ€λ΅ payloadμ— λ„£λ” κ²ƒμ΄ μ•„λ‹λΌ, λ³€ν•μ„ μ£Όμ–΄μ„ λ„£κ³  μ‹¶λ‹¤λ©΄, createActionμ λ‘ λ²μ§Έ ν•¨μμ— payloadλ¥Ό μ •μν•λ” ν•¨μλ¥Ό λ”°λ΅ μ„ μ–Έν•΄μ„ λ„£μ–΄μ£Όλ©΄ λλ‹¤.

```js
const MY_ACTION = 'sample/MY_ACTION';
const myAction = createAction(MY_ACTION, text => `${text} μ•ΌνΈ!`);
const action = myAction('hello world');
/*
  κ²°κ³Ό:
  { type: MY_ACTION, payload: 'hello world μ•ΌνΈ!' }
*/
```

μ΄μ  todosλ¥Ό λ°”κΏ”λ³΄μ.

```js
import { createAction, handleActions } from 'redux-actions';

const CHANGE_INPUT = 'todos/CHANGE_INPUT';
const INSERT = 'todos/INSERT';
const TOGGLE = 'todos/TOGGLE';
const REMOVE = 'todos/REMOVE';

// export const changeInput = (input) => ({ type: CHANGE_INPUT, input });
export const changeInput = createAction(CHANGE_INPUT, (input) => input);

// let id = 3;
// export const insert = (text) => ({
//   type: INSERT,
//   todo: {
//     id: id++,
//     text,
//     done: false,
//   },
// });
let id = 3;
export const insert = createAction(INSERT, (text) => ({
  // todo: {} μ΄ μ•μ— λ„£μ–΄μ£Όλ” κ²ƒμ΄ μ•„λ‹
  id: id++,
  text,
  done: false,
}));

// export const toggle = (id) => ({ type: TOGGLE, id });
// export const remove = (id) => ({ type: REMOVE, id });
export const toggle = createAction(TOGGLE, (id) => id);
export const remove = createAction(REMOVE, (id) => id);
```

π“ createAction λ§ ν•΄μ„λ” reducerλ¥Ό κ³ μΉμ§€ μ•μ•κΈ° λ•λ¬Έμ— λ™μ‘ν•μ§€ μ•μ.

insertμ κ²½μ° todo κ°μ²΄λ¥Ό μ•΅μ… κ°μ²΄ μ•μ— λ„£μ–΄μ£Όμ–΄μ•Ό ν•κΈ° λ•λ¬Έμ— λ‘ λ²μ§Έ νλΌλ―Έν„°μ— textλ¥Ό λ„£μΌλ©΄ todo κ°μ²΄κ°€ λ°ν™λλ” ν•¨μλ¥Ό λ„£μ–΄μ£Όμ—λ‹¤.

λ‚λ¨Έμ§€ ν•¨μμ—λ” `text => text` νΉμ€ `id => id` μ™€ κ°™μ€ ν•νƒλ΅ νλΌλ―Έν„°λ¥Ό κ·Έλ€λ΅ λ°ν™ν•λ” ν•¨μλ¥Ό λ„£μ—λ‹¤. μ΄ μ‘μ—…μ€ ν•„μλ” μ•„λ‹. μƒλµν•΄λ„ λ‘κ°™μ΄ μ‘λ™ν•μ§€λ§, μ—¬κΈ°μ„ μ΄ ν•¨μλ¥Ό λ„£μ–΄μ¤μΌλ΅μ¨ μ΄ μ•΅μ… μƒμ„±ν•¨μμ νλΌλ―Έν„°λ΅ μ–΄λ–¤ κ°’μ΄ ν•„μ”ν•μ§€ μ‰½κ² νμ•…ν•  μ μλ‹¤.

μ΄μ  `handleActions` λ΅ λ¦¬λ“€μ„λ¥Ό μ¬μ‘μ„± ν•΄λ³΄μ. createActionμΌλ΅ λ§λ“  μ•΅μ… μƒμ„±ν•¨μλ” νλΌλ―Έν„°λ΅ λ°›μ•„ μ¨ κ°’μ„ κ°μ²΄ μ•μ— λ„£μ„ λ• μ›ν•λ” μ΄λ¦„μΌλ΅ λ„£λ” κ²ƒμ΄ μ•„λ‹λΌ, action.id, action.todoμ™€ κ°™μ΄ `action.payload` λΌλ” μ΄λ¦„μ„ κ³µν†µμ μΌλ΅ λ„£μ–΄μ£Όκ² λλ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ—, κΈ°μ΅΄μ μ—…λ°μ΄νΈ λ΅μ§μ—μ„λ„ λ¨λ‘ action.payload κ°’μ„ μ΅°νν•΄ μ—…λ°μ΄νΈ ν•λ„λ΅ κµ¬ν„ν•΄μ•Ό ν•¨.

π”¥ μ•΅μ… μƒμ„± ν•¨μλ” μ•΅μ…μ— ν•„μ”ν• μ¶”κ°€ λ°μ΄ν„°λ¥Ό λ¨λ‘ `payload` λΌλ” μ΄λ¦„μΌλ΅ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— action.id, action.todo λ§κ³ , λ¨λ‘ κ³µν†µμ μΌλ΅ `action.payload` κ°’μ„ μ΅°νν•λ„λ΅ λ¦¬λ“€μ„λ¥Ό κµ¬ν„ν•΄μ£Όμ–΄μ•Ό ν•¨.

```js
// module/todos.js
import { createAction, handleActions } from 'redux-actions';

// ...

const todos = handleActions(
  {
    [CHANGE_INPUT]: (state, action) => ({ ...state, input: action.payload }),
    [INSERT]: (state, action) => ({
      ...state,
      todos: state.todos.concat(action.payload),
    }),
    [TOGGLE]: (state, action) => ({
      ...state,
      todos: state.todos.map((todo) =>
        todo.id === action.payload ? { ...todo, done: !todo.done } : todo,
      ),
    }),
    [REMOVE]: (state, action) => ({
      ...state,
      todos: state.todos.filter((todo) => todo.id !== action.payload),
    }),
  },
  initialState,
);

export default todos;
```

λ¨λ“  μ¶”κ°€ λ°μ΄ν„° κ°’μ„ `action.payload` λ΅ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— λ¦¬λ“€μ„ μ½”λ“λ¥Ό λ‹¤μ‹ λ³Ό λ• ν—·κ°λ¦΄ μ μμ. κ°μ²΄ λΉ„κµ¬μ΅°ν™” ν• λ‹Ή λ¬Έλ²•μΌλ΅ action κ°’μ payload μ΄λ¦„μ„ μƒλ΅ μ„¤μ •ν•΄μ£Όλ©΄ action.payloadκ°€ μ •ν™•μ΄ μ–΄λ–¤ κ°’μ„ μλ―Έν•λ”μ§€ λ” μ‰½κ² νμ•…ν•  μ μλ‹¤.

```js
const todos = handleActions(
  {
    [CHANGE_INPUT]: (state, { payload: input }) => ({ ...state, input }),
    [INSERT]: (state, { payload: todo }) => ({
      ...state,
      todos: state.todos.concat(todo),
    }),
    [TOGGLE]: (state, { payload: id }) => ({
      ...state,
      todos: state.todos.map((todo) =>
        todo.id === id ? { ...todo, done: !todo.done } : todo,
      ),
    }),
    [REMOVE]: (state, { payload: id }) => ({
      ...state,
      todos: state.todos.filter((todo) => todo.id !== id),
    }),
  },
  initialState,
);
```

