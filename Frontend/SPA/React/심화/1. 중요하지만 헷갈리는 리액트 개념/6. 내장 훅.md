# ë‚´ì¥ í›…

useState, useEffect ì™¸ ë‹¤ì–‘í•œ í›…ì„ ì œê³µí•¨.

<br/>

## useContext: Consumer ì»´í¬ë„ŒíŠ¸ ì—†ì´ ì½˜í…ìŠ¤íŠ¸ ì‚¬ìš©í•˜ê¸°

useContext í›…ì„ ì‚¬ìš©í•˜ë©´ Consumer ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ì „ë‹¬ëœ ì½˜í…ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë¨¼ì € ê¸°ì¡´ ë°©ì‹ë¶€í„° í•œë²ˆ ë³´ì.

```jsx
const UserContext = React.createContext();
const user = { name: 'hst', age: 23 };

const ParentComponent = () => {  // ğŸ“Œ
  return (
    <div>
      <UserContext.Provider value={user}>
        <ChildComponent />
      </UserContext.Provider>
    </div>
  );
};

const ChildComponent = () => {  // ğŸ‘»
  // ...  ğŸŒˆ
  return (
    <div>
      <UserContext.Consumer>
        {(user) => (
          <>
            <p>{`name: ${user.name}`}</p>
            <p>{`age: ${user.age}`}</p>
          </>
        )}
      </UserContext.Consumer>
    </div>
  );
};
```

- ğŸ“Œ: ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” Provider ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤.
- ğŸ‘»: ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” Consumer ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ë°©ì‹ì€ Consumer ì»´í¬ë„ŒíŠ¸ ì•ˆìª½ì—ì„œë§Œ Context ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” í•œê³„ê°€ ìˆë‹¤.
- ğŸŒˆ: ì´ ì˜ì—­ì—ì„œëŠ” Context ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë³µì¡í•œ ë°©ë²•ì„ ì“¸ ìˆ˜ ë°–ì— ì—†ë‹¤.

ì•„ë˜ì™€ ê°™ì´ useContext í›…ì„ ì‚¬ìš©í•˜ë©´ ğŸŒˆ ì˜ì—­ì—ì„œë„ ì½˜í…ìŠ¤íŠ¸ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```jsx
const ChildComponent = () => {
  const user = useContext(UserContext);  // ğŸš€
  console.log(`user: ${user.name}, ${user.age}`);
  // ...
}
```

- ğŸš€: Consumer ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ JSX ë¶€ë¶„ì´ ë³µì¡í•´ì§€ëŠ” ë‹¨ì ì´ ìˆì§€ë§Œ, useContext í›…ì€ ì‚¬ìš©í•˜ê¸° ê°„í¸í•˜ë‹¤.

<br/>

## useRef: ë Œë”ë§ê³¼ ë¬´ê´€í•œ ê°’ ì €ì¥í•˜ê¸°

useRef í›…ì€ ìì‹ ìš”ì†Œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì™¸ì— ì¤‘ìš”í•œ ìš©ë„ê°€ í•˜ë‚˜ ë” ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìƒì„±ë˜ëŠ” ê°’ ì¤‘ì—ëŠ” ë Œë”ë§ê³¼ ë¬´ê´€í•œ ê°’ë„ ìˆëŠ”ë°, ì´ ê°’ì„ ì €ì¥í•  ë•Œ useRef í›…ì„ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ **setTimeout** ì´ ë°˜í™˜í•˜ëŠ” ê°’ì€ ì–´ë””ì—”ê°€ ì €ì¥í•´ ë‘ì—ˆë‹¤ê°€ ì ì ˆí•œ ì‹œì ì—ì„œ **clearTimeout** ì„ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤. (ë¬¼ë¡  useState í›…ë„ ë³€ìˆ˜ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª… ì£¼ê¸°ì™€ ë°€ì ‘í•˜ê²Œ ì—°ê´€ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë Œë”ë§ê³¼ ë¬´ê´€í•œ ê°’ì„ ì €ì¥í•˜ê¸°ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŒ.)

ì•„ë˜ëŠ” useRef ë¥¼ ì‚¬ìš©í•´ ì´ì „ ìƒíƒ¯ê°’ì„ ì €ì¥í•˜ëŠ” ì½”ë“œë‹¤.

```jsx
const Profile = () => {
  const [age, setAge] = useState(20);
  const prevAgeRef = useRef(20);  // ğŸ’§
  
  useEffect(() => {  // ğŸ”¥
    prevAgeRef.current = age;
  }, [age]);

  const prevAge = prevAgeRef.current;  // ğŸ‘»
  const text = age === prevAge ? 'same' : age > prevAge ? 'older' : 'younger';  // ğŸ‘»

  return (
    <div>
      <p>{`age ${age} is ${text} than age $${prevAge}`}</p>
      <button
        onClick={() => {
          const age = Math.floor(Math.random() * 50 + 1);
          setAge(age);  // ğŸš€
        }}
      >
        ë‚˜ì´ ë³€ê²½
      </button>
    </div>
  );
};
```

- ğŸ’§: age ì˜ ì´ì „ ìƒíƒœê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ useRef í›…ì„ ì‚¬ìš©í•œë‹¤.
- ğŸ”¥: age ê°’ì´ ë³€ê²½ë˜ë©´ ê·¸ ê°’ì„ prevAgeRef ì— ì €ì¥í•œë‹¤.
- ğŸ‘»: age ì´ì „ ìƒíƒœê°’ì„ ì´ìš©í•œë‹¤.
- ğŸš€: age ê°€ ë³€ê²½ë¼ì„œ ë‹¤ì‹œ ë Œë”ë§ í•  ë•Œ ğŸ‘» ì˜ prevAgeëŠ” ageì˜ ì´ì „ ìƒíƒ¯ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤. ê·¸ë¦¬ê³  ë Œë”ë§ì´ ëë‚˜ë©´ prevAgeRefëŠ” ageì˜ ìµœì‹  ìƒíƒ¯ê°’ìœ¼ë¡œ ë³€ê²½ëœë‹¤.

ì´ë ‡ê²Œë§Œ ì ì–´ë†“ìœ¼ë©´ í—·ê°ˆë¦¬ë‹ˆê¹Œ ì»´í¬ë„ŒíŠ¸ì˜ ì‹¤í–‰ì„ ìˆœì„œëŒ€ë¡œ í•œë²ˆ ì ì–´ë³´ì.

1. ì´ˆê¸° ë Œë”ë§. age, prevAgeRef(prevAgeRef.current) ì˜ ê°’ì€ ë‘˜ë‹¤ `20` ì„.
2. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. onClick ì•ˆì˜ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ageê°€ ìƒˆë¡œ ì„¸íŒ…ë¨.
3. ìƒíƒ¯ê°’ì´ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ ë¦¬ë Œë”ë§ ì‹œì‘.
4. ì´ë•Œ, `useEffectëŠ” ë Œë”ë§ì´ ë§ˆì¹œ í›„ì— ì‹¤í–‰` ë˜ë¯€ë¡œ, ì•„ì§ì€ ì‹¤í–‰ë˜ì§€ ì•Šê³ , prevAgeRef ê°’ì€ ì—¬ì „íˆ 20ì„.
5. return í•˜ìœ„ì˜ íƒœê·¸ë“¤ì´ ë¦¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ ageì— ë¬¼ë ¤ìˆëŠ” ê°’ë“¤ì´ ë³€í–ˆë‹¤. ë¬¼ë¡ , prevAgeRefì— ë¬¼ë ¤ìˆëŠ” ê°’ë“¤ë„ ë³€í–ˆì§€ë§Œ useEffectê°€ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ prevAgeRef ì˜ ê°’ì€ ì—¬ì „íˆ 20.
6. ë Œë”ë§ ì¢…ë£Œ.
7. ì´ì œ useEffect ì‹¤í–‰ë¨. ê·¸ëŸ¬ë©´ì„œ ìƒˆë¡œìš´ ageì˜ ê°’ì´ prevAgeRef.current ê°’ìœ¼ë¡œ ë“¤ì–´ê°.
8. ë‹¤ì‹œ í•œë²ˆ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ 1~7 ê³¼ì •ì„ ê±°ì¹˜ë©´ì„œ prevAgeRef ê°’ì´ ì´ì „ ê°’ì„ ë°”ë¼ë³´ê³  ìˆëŠ” ê°’ìœ¼ë¡œ ë Œë”ë§ ë˜ëŠ” ê²ƒ.

<br/>

## useMemo, useCallback: ë©”ëª¨ì´ì œì´ì…˜ í›…

useMemo, useCallbackì€ ì´ì „ ê°’ì„ ê¸°ì–µí•´ì„œ ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë¨.

### useMemo

```jsx
import React, { useMemo } from 'react';
import { runExpensiveJob } from './util';

const MyComponent = ({ v1, v2 }) => {
  const value = useMemo(() => runExpensiveJob(v1, v2), [v1, v2]);  // ğŸ‘»
  return <p>{`value is ${value}`}</p>
}
```

- ğŸ‘»: useMemo í›…ì˜ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ì…ë ¥í•œë‹¤. useMemoëŠ” ì´ í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ê°’ì„ ê¸°ì–µí•œë‹¤. useMemoì˜ ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” ì˜ì¡´ì„± ë°°ì—´ì´ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ì´ì „ì— ë°˜í™˜ëœ ê°’ì„ ì¬ì‚¬ìš©í•œë‹¤. ë§Œì•½, ë°°ì—­ì˜ ê°’ì´ ë³€ê²½ë˜ì—ˆìœ¼ë©´ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì…ë ¥ëœ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³  ë°˜í™˜ê°’ì„ ê¸°ì–µí•¨.

---

### useCallback

useMemo í›…ì€ lodash ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•´ ì£¼ëŠ” ë©”ëª¨ì´ì œì´ì…˜ê³¼ ë¹„ìŠ·í•˜ë‹¤. ë°˜ë©´, useCallbackì€ ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§ ì„±ëŠ¥ì„ ìœ„í•´ ì œê³µë˜ëŠ” í›…ì„.

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ìƒì„±í•´ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ì†ì„± ê°’ìœ¼ë¡œ ì…ë ¥í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë¦¬ì•¡íŠ¸ íŒ€ì—ì„œëŠ” ìµœê·¼ì˜ ë¸Œë¼ìš°ì €ì—ì„œ í•¨ìˆ˜ ìƒì„±ì´ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì˜í–¥ì€ ì‘ë‹¤ê³  ì£¼ì¥í•¨. ê·¸ë³´ë‹¤ëŠ” ì†ì„±ê°’ì´ ë§¤ë²ˆ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ `React.memo` ë¥¼ ì‚¬ìš©í•´ë„ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ë°œìƒí•œë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ useCallback í›…ì„ ì œê³µí•œë‹¤.

```jsx
import React, { useState } from 'react';
import { saveToServer } from './api';
import UserEdit from './UserEdit';

const Profile = () => {
  const [name, setName] = useState('');
  const [age, setAge] = useState(0);
  return (
    <div>
      <p>{`name: ${name}`}</p>
      <p>{`age: ${age}`}</p>
      <UserEdit 
        onSave={() => saveToServer(name, age)}  // ğŸš€
        setName={setName}
        setAge={setAge}
      />
    </div>
  );
}
```

- ğŸš€: Prpfile ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ UserEdit ì»´í¬ë„ŒíŠ¸ì˜ onSave ì†ì„±ìœ¼ë¡œ ìƒˆë¡œìš´ í•¨ìˆ˜ê°€ ì…ë ¥ëœë‹¤.

ë”°ë¼ì„œ, UserEdit ì»´í¬ë„ŒíŠ¸ì—ì„œ React.memo ë¥¼ ì‚¬ìš©í•´ë„ onSave ì†ì„±ê°’ì´ í•­ìƒ ë³€ê²½ë˜ê³  ê·¸ ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ë°œìƒ. onSave ì†ì„±ê°’ì€ name ì´ë‚˜ age ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ í•­ìƒ ê°™ì•„ì•¼ í•œë‹¤.

useCallbackì„ ì‚¬ìš©í•˜ë©´ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

```jsx
// ...
const Profile = () => {
  const [name, setName] = useState('');
  const [age, setAge] = useState(0);
  const onSave = useCallback(() => saveToServer(name, age), [name, age]);  // ğŸ”¥
  return (
    <div>
      <p>{`name: ${name}`}</p>
      <p>{`age: ${age}`}</p>
      <UserEdit 
        onSave={onSave}
        setName={setName}
        setAge={setAge}
      />
    </div>
  );
}
```

- ğŸ”¥: ì´ì „ì— onSave ì†ì„±ê°’ìœ¼ë¡œ ì „ë‹¬í–ˆë˜ ê²ƒê³¼ ê°™ì€ í•¨ìˆ˜ë¥¼ useCallback í›…ì˜ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì…ë ¥. ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” deps. depsê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ì´ì „ì— ìƒì„±í•œ í•¨ìˆ˜ê°€ ì¬ì‚¬ìš©ë¨.

<br/>

## useReducer: ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°’ì„ ë¦¬ë•ìŠ¤ì²˜ëŸ¼ ê´€ë¦¬í•˜ê¸°

useReducerëŠ” stateë¥¼ ë¦¬ë•ìŠ¤ì˜ ë¦¬ë“€ì„œì²˜ëŸ¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

```jsx
import React, { useReducer } from 'react';

const INITIAL_STATE = { name: 'empty', age: 0 };  // ğŸ’§
function reducer(state, action) {
  switch (action.type) {
    case 'setName':
      return { ...state, name: action.name };
    case 'setAge':
      return { ...state, age: action.age };
    default:
      return state;
  }
}                                                 // ğŸ’§

const Profile = () => {
  const [state, dispatch] = useReducer(reducer, INITIAL_STATE);  // ğŸ”¥
  return (
    <div>
      <p>{`name: ${state.name}`}</p>
      <p>{`age: ${state.age}`}</p>
      <input
        type='text'
        value={state.name}
        onChange={(e) =>
          dispatch({ type: 'setName', name: e.currentTarget.value })  // ğŸŒˆ
        }
      />
      <input
        type='number'
        value={state.age}
        onChange={(e) =>
          dispatch({ type: 'setAge', age: e.currentTarget.value })
        }
      />
    </div>
  );
};

export default Profile;
```

- ğŸ’§: ì´ ë²”ìœ„ì— ìˆëŠ”ê²Œ ë¦¬ë•ìŠ¤ì˜ ë¦¬ë“€ì„œì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•œ ë¦¬ë“€ì„œ í•¨ìˆ˜.
- ğŸ”¥: useReducer í›…ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì•ì—ì„œ ì‘ì„±í•œ ë¦¬ë“€ì„œì™€ ì´ˆê¸° ìƒíƒ¯ê°’ì„ ì…ë ¥í•œë‹¤.
- ğŸŒˆ: ë¦¬ë•ìŠ¤ì˜ dispatch í•¨ìˆ˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

---

### íŠ¸ë¦¬ì˜ ê¹Šì€ ê³³ìœ¼ë¡œ ì´ë²¤íŠ¸ ì²˜ë¦¬ í•¨ìˆ˜ ì „ë‹¬í•˜ê¸°

ë³´í†µ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë‹¤ìˆ˜ì˜ state ê°’ì„ ê´€ë¦¬í•œë‹¤. ì´ ë•Œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ë°œìƒí•œ ì´ë²¤íŠ¸ì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ state ê°’ì„ ë³€ê²½í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì´ë¥¼ ìœ„í•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ íŠ¸ë¦¬ì˜ ê¹Šì€ ê³³ê¹Œì§€ ì´ë²¤íŠ¸ ì²˜ë¦¬ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•¨. ì´ ì‘ì—…ì€ ìƒë‹¹íˆ ì†ì´ ë§ì´ê°€ê³  ê°€ë…ì„± down.

`useReducer` ì™€ `Context API` ë¥¼ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ íŠ¸ë¦¬ì˜ ê¹Šì€ ê³³ìœ¼ë¡œ ì´ë²¤íŠ¸ ì²˜ë¦¬ í•¨ìˆ˜ë¥¼ ì‰½ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

```jsx
// ...
export const ProfileDispatch = React.createContext(null);  // ğŸ‘»
// ...
const Profile = () => {
  const [state, dispatch] = useReducer(reducer, INITIAL_STATE);
  return (
    <div>
      <p>{`name: ${state.name}`}</p>
      <p>{`age: ${state.age}`}</p>
      <ProfileDispatch.Provider value={dispatch}>  // ğŸ‰
        <SomeComponent />
      </ProfileDispatch.Provider>
    </div>
  );
}
```

- ğŸ‘»: dispatch í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ì½˜í…ìŠ¤íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
- ğŸ‰: Providerë¥¼ í†µí•´ì„œ dispatch í•¨ìˆ˜ë¥¼ ë°ì´í„°ë¡œ ì „ë‹¬í•œë‹¤. SomeComponent `í•˜ìœ„ì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸` ì—ì„œëŠ” Contextë¥¼ í†µí•´ dispatch í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

useReducer í›…ì˜ dispatch í•¨ìˆ˜ëŠ” ê°’ì´ ë³€í•˜ì§€ ì•ŠëŠ” íŠ¹ì§•ì´ ìˆì–´ì„œ Contextì˜ Consumer ì»´í¬ë„ŒíŠ¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ìì£¼ ë Œë”ë§ ë˜ëŠ” ì¼ì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤!!!

<br/>

## useImperativeHandle: ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ í•¨ìˆ˜ êµ¬í•˜ê¸°

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ëŠ” ref ê°ì²´ë¥¼ í†µí•´ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì¸ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì´ ë°©ì‹ì€ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ë¶€ êµ¬í˜„ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ìƒê¸°ë¯€ë¡œ ì§€ì–‘í•´ì•¼ í•˜ì§€ë§Œ ê¼­ í•„ìš”í•œ ê²½ìš°ê°€ ì¢…ì¢… ìƒê¹€. `useImperativeHandle` í›…ì„ ì´ìš©í•˜ë©´ ë§ˆì¹˜ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ë„ ë©”ì„œë“œê°€ ìˆëŠ” ê²ƒì²˜ëŸ¼ ë§Œë“¤ ìˆ˜ ìˆìŒ.

### ìì‹ ì»´í¬ë„ŒíŠ¸

```jsx
import React, { forwardRef, useImperativeHandle, useState } from 'react';

const Profile = (props, ref) => {  // â­ï¸
  const [name, setName] = useState('');
  const [age, setAge] = useState(0);

  useImperativeHandle(ref, () => ({  // ğŸ“Œ
    addAge: (value) => setAge(age + value),
    getNameLength: () => name.length,
  }));
  return (
    <div>
      <p>{`name: ${name}`}</p>
      <p>{`age: ${age}`}</p>
    </div>
  );
};

export default forwardRef(Profile);  // ğŸ‘»
```

- ğŸ‘»: ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì…ë ¥í•œ ref ê°ì²´ë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ forwardRef í•¨ìˆ˜ë¥¼ í˜¸ì¶œ.
- â­ï¸: ref ê°ì²´ëŠ” ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ì–´ì˜´.
- ğŸ“Œ: useImperativeHandle í›…ìœ¼ë¡œ ref ê°ì²´ì™€ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤.

### ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸

```jsx
const Parent = () => {
  const profileRef = useRef();
  const onClick = () => {
    if (profileRef.current) {
      console.log('current name length: ', profileRef.current.getNameLength());  // ğŸ‰
      profileRef.current.addAge(5);  // ğŸ‰
    }
  };
  return (
    <div>
      <Profile ref={profileRef} />  // ğŸ’§
      <button onClick={onClick}>add age 5</button>
    </div>
  );
};
```

- ğŸ‰: Profile ì»´í¬ë„ŒíŠ¸ì—ì„œ êµ¬í˜„í•œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
- ğŸ’§: Profile ì»´í¬ë„ŒíŠ¸ì˜ ì†ì„± ê°’ìœ¼ë¡œ ref ê°ì²´ë¥¼ ì „ë‹¬í•œë‹¤.

<br/>

## ê¸°íƒ€ ë‚´ì¥ í›…: useLayoutEffect, useDebugValue

### useLayoutEffect

useEffect í›…ì— ì…ë ¥ëœ ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ëŠ” ë Œë”ë§ ê²°ê³¼ê°€ ë”ì— ë°˜ì˜ëœ í›„ ë¹„ë™ê¸°ë¡œ í˜¸ì¶œëœë‹¤. useLayoutEffect í›…ì€ useEffect í›…ê³¼ ê±°ì˜ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ `ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ë¥¼ ë™ê¸°ë¡œ í˜¸ì¶œ` í•œë‹¤ëŠ” ê²ƒì´ ë‹¤ë¥´ë‹¤. ì¦‰, useLayoutEffect ì˜ ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ëŠ” ë Œë”ë§ ê²°ê³¼ê°€ ë”ì— ë°˜ì˜ëœ ì§í›„ì— í˜¸ì¶œëœë‹¤.

useLayoutEffect í›…ì˜ ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ì—ì„œ ì—°ì‚°ì„ ë§ì´ í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ ë¨¹í†µ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜í•´ì•¼í•¨. íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ useEffect í›…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ìƒ ì´ì ì´ ìˆë‹¤. **ë Œë”ë§ ì§í›„ ë” ìš”ì†Œì˜ ê°’ì„ ì½ëŠ” ê²½ìš°**ì—ëŠ” useLayoutEffect í›…ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì í•©.

---

### useDebugValue

useDebugValueëŠ” ê°œë°œ í¸ì˜ë¥¼ ìœ„í•´ ì œê³µë˜ëŠ” í›…. useDebugValue í›…ì„ ì‚¬ìš©í•˜ë©´ ì»¤ìŠ¤í…€ í›…ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ê´€ì°°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë””ë²„ê¹…ì— ë„ì›€ì´ ë¨. ë‹¤ìŒì€ useToggle ì»¤ìŠ¤í…€ í›…ì—ì„œ ë””ë²„ê¹…ì„ ìœ„í•´ useDebugValue í›…ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì„.

```jsx
function useToggle(initialValue) {
  const [value, setValue] = useState(initialValue);
  const onToggle = () => setValue(!value);
  useDebugValue(value ? 'on' : 'off');  // ğŸš€
  return [value, onToggle];
}
```

- ğŸš€: ë””ë²„ê¹… ì‹œ í™•ì¸í•  ê°’ì„ useDebugValue í›…ìœ¼ë¡œ ì…ë ¥í•œ ê°’ì€ ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ì•¡íŠ¸ ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŒ.
