# 라이프사이클

뷰에서는 인스턴스의 상태에 따라 호출할 수 있는 속성이 있다. 이 속성들을 `라이프사이클` 이라고 함. 이 라이프 사이클 속성들 안에서 실행되는 커스텀 로직을 `라이프사이클 훅` 이라고 한다.

```html
<script>
  export default {
  // 여기에 작성한다.
  }
</script>
```

## 대표적인 라이프사이클 메서드

1. `created` : 인스턴스가 생성되자마자 호출되는 hook.

2. `mounted`  : DOM이 마운트 된 후

3. `updated`  : data가 업데이트 된 후

4. `destroyed` : vue 인스턴스가 사라진 후

beforeCreate, beforeMount, beforeUpdate, beforeDestory 등등 있다. 그 전에 실행되는 hooks.

<img width="600" alt="lifecycle" src="https://user-images.githubusercontent.com/59427983/110242279-b007f480-7f98-11eb-9020-32c014a0e95e.png">

이 구조를 보면 쉽게 알 수 있다.

<br/>

<br/>

## 세부적인 내용

라이프 사이클은 인스턴스의 생성, 소멸, 변경에 따라 총 8개로 구성되어 있음. 컴포넌트에 관련된 모든 데이터를 생성한 뒤 DOM에 부착하고, 내용이 갱신되며 소멸하기까지에 이른 8가지의 단계다.

<br/>

### BeforeCreate

- 인스턴스가 생성되고 가장 먼저 실행되는 라이프사이클
- data 속성과 methods 속성이 아직 정의되지 않은 상태
- DOM으로 접근이 불가함

<br/>

### Created

- data 속성과 methods 속성이 정의되어 접근이 가능한 상태
- 템플릿이 컴파일되기 전 상태. 템플릿에 정의된 DOM 요소 접근 불가능
- 주로 서버에서 데이터를 요청하고 받아오는 로직을 수행
- 인스턴스의 el 속성과 template 속성을 체크
- template 속이 존재하면 `render` 함수를 실행시켜 DOM을 그림

<br/>

### BeforeMount

- created 단계에서 마크업 속성을 `render` 함수로 변환 후 el 속성에 지정된 DOM에 인스턴스를 부착하기 전 단계
- DOM에 그려지기 전 로직을 수행하는데 알맞음

<br/>

### Mounted

- 템플릿이 컴파일되어 DOM에 부착된 상태
- DOM에 접근이 가능하므로 DOM을 제어하기 알맞음

<br/>

### BeforeUpdate

- el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 인스턴스에 정의한 속성들이 화면에 치환된다. 치환된 값은 뷰의 반응성을 제공하기 위해 `$watch` 속성으로 감시함. 이를 데이터 관찰이라고도 함
- `beforeUpdate` 는 관찰하고 있는 데이터가 변경되면 가상 DOM으로 화면을 다시 그리기 전 호출되는 단계
- 변경 예정인 새 데이터에 접근할 수 있어 변경 예정 데이터의 값과 관련된 로직을 미리 넣을 수 있다.
- 데이터를 변경하는 로직을 수행해도 이 단계에서는 실제로 화면이 다시 그려지진 않는다.

<br/>

### Updated

- 데이터가 변경되고 나서 가상 DOM으로 다시 화면을 그리고 나면 실행되는 단계
- 데이터 변경으로 인한 화면 요소 변경까지 완료된 시점이므로, 데이터 변경 후 화면 요소 제어와 관련된 로직을 추가하기 좋은 단계.
- 이 단계에서 데이터 값을 변경하면 무한 루프에 빠질 수 있으므로 값을 변경하려면 `computed`, `watch` 와 같은 속성을 사용해야 함.
- 따라서 데이터 값을 갱신하는 로직은 가급적이면 `beforeUpdate` 에 추가하고, `updated` 에서는 변경 데이터의 DOM과 관련된 로직을 추가하는 것이 좋다.

<br/>

### BeforeDestory

- 뷰 인스턴스가 파괴되기 직전에 호출되는 단계. 이 단계에서는 아직 인스턴스에 접근할 수 있음.
- DOM에 걸어놨던 이벤트 등을 삭제하기 알맞음

<br/>

### Destoryed

- 뷰 인스턴스가 파괴되고 나서 호출되는 단계. 뷰 인스턴스에 정의한 모든 속성이 제거되고 하위에 선언한 인스턴스들 또한 모두 파괴됨.

