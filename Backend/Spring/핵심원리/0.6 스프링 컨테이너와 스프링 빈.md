# ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ

`@Configuration`, `@Bean` ì–´ë…¸í…Œì´ì…˜ì„ configíŒŒì¼ì— ì¶”ê°€í•œë‹¤.

```java
@Configuration  
public class AppConfig {  
  
    @Bean  
    public MemberService memberService() {  
        return new MemberServiceImpl(memberRepository());  
    }  
  
    @Bean  
    public MemberRepository memberRepository() {  
        return new MemoryMemberRepository();  
    }  
  
    @Bean  
    public OrderService orderService() {  
        return new OrderServiceImpl(memberRepository(), discountPolicy());  
    }  
  
    @Bean  
    public DiscountPolicy discountPolicy() {  
        // return new FixDiscountPolicy();  
        return new RateDiscountPolicy();  
    }  
}
```

ê·¸ëŸ¬ë©´ Application.javaì—ì„œ `new AppConfig()` ë¡œ ì§ì ‘ ì½”ë“œë¡œ ìƒì„±í–ˆë˜ ê²ƒì„ ì œê±°í•  ìˆ˜ ìˆìŒ.

```java {3,4}
public class MemberApp {  
    public static void main(String[] args) {  
        AppConfig appConfig = new AppConfig();  
        MemberService memberService = appConfig.memberService();  
        
        Member member = new Member(1L, "memberA", Grade.VIP);  
        memberService.join(member);  
  
        Member findMember = memberService.findMember(1L);  
        System.out.println("new member = " + member.getName());  
        System.out.println("find member = " + findMember.getName());  
    }  
}
```

ì´ë ‡ê²Œ ê°€ì ¸ì™”ë˜ ê²ƒì„

```java {3,4}
public class MemberApp {
    public static void main(String[] args) {
        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
		//...
    }
}
```

ì´ë ‡ê²Œ ë³€ê²½í•´ì¤„ ìˆ˜ ìˆë‹¤. ApplicationContextë€? ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë‹¤.

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
ApplicationContext applicationContext =
  new AnnotationConfigApplicationContext(AppConfig.class);
```

- `ApplicationContext` ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•¨.
	- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ `AppConfig` ë¥¼ ì‚¬ìš©í•´ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIí–ˆì§€ë§Œ, ì´ì œë¶€í„° ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì‚¬ìš©í•¨.
- `@Configuration`
	- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration` ì´ ë¶™ì€ `AppConfig` ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©.
- `@Bean`
	- `@Bean` ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•¨.
	- ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•¨.
	- ìŠ¤í”„ë§ ë¹ˆì€ `@Bean` ì´ ë¶€í„´ì€ ë©”ì„œë“œ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•¨ (`memberSerivce`, `orderService`)
- ì´ì „ì—” ê°œë°œìê°€ í•„ìš”í•œ ê°ì²´ë¥¼ `AppConfig` ë¥¼ ì‚¬ìš©í•´ ì§ì ‘ ì¡°íšŒí–ˆì§€ë§Œ, ì´ì œë¶€í„° ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ì„ ì°¾ì•„ì•¼ í•¨.
	- ìŠ¤í”„ë§ ë¹ˆì€ `applicationContext.getBean()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì°¾ì„ ìˆ˜ ìˆìŒ.
- ê°œë°œìê°€ ì§ì ‘ ìë°” ì½”ë“œë¡œ ëª¨ë“  ê²ƒì„ í–ˆë‹¤ë©´ ì´ì œë¶€í„° ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.
ê·¼ë° ì´ë ‡ê²Œ í•˜ë©´ ì½”ë“œê°€ ë” ê¸¸ì–´ì§€ëŠ”ë° ì´ê²Œ ì™œ ì¢‹ì€ê°€?

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •

#### 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

<img width="773" alt="image" src="https://github.com/user-attachments/assets/102d7c18-ac8c-4a69-91ce-bf537f9258c4" />

- `new AnnotationConfigApplicationContext(AppConfig.class)`
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•¨.
- ì—¬ê¸°ì„œëŠ” `AppConfig.class` ë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì§€ì •í•¨.

#### 2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡

<img width="770" alt="image" src="https://github.com/user-attachments/assets/465e17bf-0490-4ef9-a3b9-a56a4889389c" />

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•¨.

> ë¹ˆ ì´ë¦„
> - ë¹ˆ ì´ë¦„ì€ ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©í•¨.
> - ë¹ˆ ì´ë¦„ì„ ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ë„ ìˆìŒ.
> `@Bean(name = "memberService2")`
> 
> ì£¼ì˜: ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•¨. ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´, ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜, ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜ ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ ë°œìƒ.

#### 3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì¤€ë¹„

<img width="786" alt="image" src="https://github.com/user-attachments/assets/b3bb8583-d325-4ac3-9eb7-122289a66254" />

#### 4. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì™„ë£Œ

<img width="776" alt="image" src="https://github.com/user-attachments/assets/79d5f112-e0a3-48b7-a06b-3fe2c0caf75a" />

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI) í•¨.
- ë‹¨ìˆœíˆ ìë°” ì½”ë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ì°¨ì´ê°€ ìˆìŒ. ì°¨ì´ëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ ì°¨ì´ì„.

> ğŸ“Œ ì°¸ê³ 
> ìŠ¤í”„ë§ì€ ë¹ˆì€ ìƒì„±, ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ ë‚˜ëˆ„ì–´ì ¸ ìˆìŒ. ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìë°” ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ í•œ ë²ˆì— ì²˜ë¦¬ë¨.
