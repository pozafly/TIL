# ë‹¤ì–‘í•œ ì—°ê´€ê´€ê³„ ë§¤í•‘(ë§¤í•‘ì •ë¦¬)

## ì—°ê´€ê´€ê³„ ë§¤í•‘ì‹œ ê³ ë ¤ì‚¬í•­ 3ê°€ì§€

### ë‹¤ì¤‘ì„±

- ë‹¤ëŒ€ì¼ N:1: `@ManyToOne`
- ì¼ëŒ€ë‹¤ 1:N: `@OneToMany`
- ì¼ëŒ€ì¼ 1:1: `@OneToOne`
- ë‹¤ëŒ€ë‹¤ N:M: `@ManyToMany`

### ë‹¨ë°©í–¥, ì–‘ë°©í–¥

- **í…Œì´ë¸”**
	- ì™œëž˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ ê°€ëŠ¥
	- ì‚¬ì‹¤ ë°©í–¥ì´ë¼ëŠ” ê°œë…ì´ ì—†ìŒ
- **ê°ì²´**
	- ì°¸ì¡°ìš© í•„ë“œê°€ ìžˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥
	- í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥
	- ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥

### ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

- í…Œì´ë¸”ì€ **ì™¸ëž˜ í‚¤ í•˜ë‚˜**ë¡œ ë‘ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìŒ
- ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” A -> B, B -> A ì²˜ëŸ¼ **ì°¸ì¡°ê°€ 2êµ°ë°**
- ë”°ë¼ì„œ ë‘˜ ì¤‘ í…Œì´ë¸”ì˜ ì™¸ëž˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê³³ì„ ì§€ì •í•´ì•¼ í•¨
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸: ì™¸ëž˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¸ì¡°
- ì£¼ì¸ì˜ ë°˜ëŒ€íŽ¸: ì™¸ëž˜ í‚¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ. ë‹¨ìˆœ ì¡°íšŒë§Œ ê°€ëŠ¥

## ë‹¤ëŒ€ì¼ N:1

### ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥

![[assets/images/6039bfa1b6255547942f2df8d1ed9df3_MD5.png]]
- ê°€ìž¥ ë§Žì´ ì‚¬ìš©í•˜ëŠ” ì—°ê´€ê´€ê³„
- **ë‹¤ëŒ€ì¼**ì˜ ë°˜ëŒ€ëŠ” **ì¼ëŒ€ë‹¤**

### ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥

![[assets/images/4be30482b5a788faa8ebf685a1b6ce38_MD5.png]]

- ì™¸ëž˜ í‚¤ê°€ ìžˆëŠ” ìª½ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
- ì–‘ìª½ì„ ì„œë¡œ ì°¸ì¡°í•˜ë„ë¡ ê°œë°œ

## ì¼ëŒ€ë‹¤ 1:N

### ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥

ðŸ“Œ ì‹¤ë¬´ì—ì„œëŠ” ê±°ì˜ ì´ ëª¨ë¸ì„ ê°€ì ¸ê°€ì§€ ì•ŠìŒ.

![[assets/images/78eb9509fd6924bbedf5852710b7faee_MD5.png]]
- DB ìž…ìž¥ì—ì„œëŠ” ë‹¤ ìª½ì— FKê°€ ë¬´ì¡°ê±´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.
- í•˜ì§€ë§Œ, ê°ì²´ ìž…ìž¥ì—ì„œëŠ” membersê°€ í•„ìš”í•œ ìž…ìž¥ìž„.
- ì¦‰, Teamì´ ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ë˜ëŠ” í˜•íƒœìž„.
---
- ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ì€ ì¼ëŒ€ë‹¤(1:N)ì—ì„œ **ì¼**(1)ì´ **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸**
- í…Œì´ë¸” ì¼ëŒ€ë‹¤ ê´€ê³„ëŠ” í•­ìƒ **ë‹¤**(N) **ìª½ì— ì™¸ëž˜ í‚¤ê°€ ìžˆìŒ**
- ê°ì²´ì™€ í…Œì´ë¸”ì˜ ì°¨ì´ ë•Œë¬¸ì— ë°˜ëŒ€íŽ¸ í…Œì´ë¸”ì˜ ì™¸ëž˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” íŠ¹ì´í•œ êµ¬ì¡°
- @JoinColumnì„ ê¼­ ì‚¬ìš©í•´ì•¼ í•¨. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì¡°ì¸ í…Œì´ë¸” ë°©ì‹ì„ ì‚¬ìš©í•¨(ì¤‘ê°„ì— í…Œì´ë¸”ì„ í•˜ë‚˜ ì¶”ê°€í•¨)
---
Â ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë§¤í•‘ì˜ ë‹¨ì 

- ì—”í‹°í‹°ê°€ ê´€ë¦¬í•˜ëŠ” ì™¸ëž˜ í‚¤ê°€ ë‹¤ë¥¸ í…Œì´ë¸”ì— ìžˆìŒ
- ì—°ê´€ê´€ê³„ ê´€ë¦¬ë¥¼ ìœ„í•´ ì¶”ê°€ë¡œ UPDATE SQL ì‹¤í–‰
- ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë§¤í•‘ë³´ë‹¤ëŠ” **ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ì„ ì‚¬ìš©**í•˜ìž

### ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥

![[assets/images/cf3b39a874e31a5a69359ce130d0836a_MD5.png]]

- ì´ëŸ° ë§¤í•‘ì€ ê³µì‹ì ìœ¼ë¡œ ì¡´ìž¬X
- @JoinColumn(**insertable=false, updatable=false**)
- **ì½ê¸° ì „ìš© í•„ë“œ**ë¥¼ ì‚¬ìš©í•´ì„œ ì–‘ë°©í–¥ ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- **ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì„ ì‚¬ìš©í•˜ìž**

## ì¼ëŒ€ì¼ 1:1

### ì¼ëŒ€ì¼ ê´€ê³„

- ì¼ëŒ€ì¼ ê´€ê³„ëŠ” ê·¸ ë°˜ëŒ€ë„ ì¼ëŒ€ì¼
- ì£¼ í…Œì´ë¸”ì´ë‚˜ ëŒ€ìƒ í…Œì´ë¸” ì¤‘ ì™œëž˜ í‚¤ ì„ íƒ ê°€ëŠ¥
	- ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤
	- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤
- ì™¸ëž˜ í‚¤ì— DB ìœ ë‹ˆí¬(UNI) ì œì•½ì¡°ê±´ ì¶”ê°€

### ì¼ëŒ€ì¼: ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ ë‹¨ë°©í–¥

![[assets/images/6f35395a974e806eb558baadbff0a07e_MD5.png]]
- ë‹¤ëŒ€ì¼(@ManyToOne) ë‹¨ë°©í–¥ ë§¤í•‘ê³¼ ìœ ì‚¬

### ì¼ëŒ€ì¼: ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ ì–‘ë°©í–¥

![[assets/images/cb170f96a40df6811a3ad81ebbe9a54e_MD5.png]]

- ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ ì²˜ëŸ¼ **ì™¸ëž˜ í‚¤ê°€ ìžˆëŠ” ê³³ì´ ì—°ê´€ê´€ê³„ ì£¼ì¸**
- ë°˜ëŒ€íŽ¸ì€ mappedBy ì ìš©

### ì¼ëŒ€ì¼: ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ ë‹¨ë°©í–¥ ì •ë¦¬

![[assets/images/bc5eb14a641b489ade5e4f048a06be6c_MD5.png]]

- **ë‹¨ë°©í–¥ ê´€ê³„ëŠ” JPA ì§€ì› X**
- ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì§€ì›

### ì¼ëŒ€ì¼: ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ ì–‘ë°©í–¥

![[assets/images/a4119acc052b345f63a6f33720e3a0a8_MD5.png]]

- ì‚¬ì‹¤ ì¼ëŒ€ì¼ ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ ì–‘ë°©í–¥ê³¼ ë§¤í•‘ ë°©ë²•ì€ ê°™ìŒ

### ì¼ëŒ€ì¼ ì •ë¦¬

- **ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤**
	- ì£¼ ê°ì²´ê°€ ëŒ€ìƒ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê°€ì§€ëŠ” ê²ƒ ì²˜ëŸ¼ ì£¼ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ë¥¼ ë‘ê³  ëŒ€ìƒ í…Œì´ë¸”ì„ ì°¾ìŒ
	- ê°ì²´ì§€í–¥ ê°œë°œìž ì„ í˜¸
	- JPA ë§¤í•‘ íŽ¸ë¦¬
	- ìž¥ì : ì£¼ í…Œì´ë¸”ë§Œ ì¡°íšŒí•´ë„ ëŒ€ìƒ í…Œì´ë¸”ì— ë°ì´í„°ê°€ ìžˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
	- ë‹¨ì : ê°’ì´ ì—†ìœ¼ë©´ ì™¸ëž˜ í‚¤ì— null í—ˆìš©
- **ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤**
	- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ëž˜ í‚¤ê°€ ì¡´ìž¬
	- ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ê°œë°œìž ì„ í˜¸
	- ìž¥ì : ì£¼ í…Œì´ë¸”ê³¼ ëŒ€ìƒ í…Œì´ë¸”ì„ ì¼ëŒ€ì¼ì—ì„œ ì¼ëŒ€ë‹¤ ê´€ê³„ë¡œ ë³€ê²½í•  ë•Œ í…Œì´ë¸” êµ¬ì¡° ìœ ì§€
	- ë‹¨ì : í”„ë¡ì‹œ ê¸°ëŠ¥ì˜ í•œê³„ë¡œ **ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•´ë„ í•­ìƒ ì¦‰ì‹œ ë¡œë”©ë¨**(í”„ë¡ì‹œëŠ” ë’¤ì—ì„œ ì„¤ëª…)

## ë‹¤ëŒ€ë‹¤ N:M (ì‹¤ë¬´ì—ì„œ ì“°ì§€ ì•ŠìŒ - ì¤‘ìš”í•˜ì§€ ì•ŠìŒ)

- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì •ê·œí™”ëœ í…Œì´ë¸” 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í‘œí˜„í•  ìˆ˜ ì—†ìŒ
- ì—°ê²° í…Œì´ë¸”ì„ ì¶”ê°€í•´ì„œ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ë‚´ì•¼í•¨

![[assets/images/2db033330c58eeabb88995d51d0eabc3_MD5.png]]

- **ê°ì²´ëŠ” ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ì„œ ê°ì²´ 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ ê°€ëŠ¥**

![[assets/images/27e9ecd0c04717ae193d967b6c1f3b5d_MD5.png]]
- **@ManyToMany** ì‚¬ìš©
- **@JoinTable**ë¡œ ì—°ê²° í…Œì´ë¸” ì§€ì •
- ë‹¤ëŒ€ë‹¤ ë§¤í•‘: ë‹¨ë°©í–¥, ì–‘ë°©í–¥ ê°€ëŠ¥

### í•œê³„

- **íŽ¸ë¦¬í•´ ë³´ì´ì§€ë§Œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©X**
- ì—°ê²° í…Œì´ë¸”ì´ ë‹¨ìˆœížˆ ì—°ê²°ë§Œ í•˜ê³  ëë‚˜ì§€ ì•ŠìŒ
- ì£¼ë¬¸ì‹œê°„, ìˆ˜ëŸ‰ ê°™ì€ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ìˆ˜ ìžˆìŒ

![[assets/images/3af01bdae7187c6f9703aa5779f463ee_MD5.png]]

### í•œê³„ ê·¹ë³µ

- **ì—°ê²° í…Œì´ë¸”ìš© ì—”í‹°í‹° ì¶”ê°€(ì—°ê²° í…Œì´ë¸”ì„ ì—”í‹°í‹°ë¡œ ìŠ¹ê²©)**
- `@ManyToMany` -> `@OneToMany`, `@ManyToOne`

![[assets/images/b6d9e75e9904657c6b9cfcd173432a18_MD5.png]]
