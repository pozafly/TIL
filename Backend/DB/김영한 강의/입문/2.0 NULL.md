# NULL

## NULL 비교

쇼핑몰에 몇 상품의 description을 빼먹은 것 같음. `description` 이 `NULL` 인 상품을 `=` 비교를 통해 조회해보자.

```sql
SELECT * FROM products WHERE description = NULL;
```

**[실행 결과]**
없음

분명 `보급형 스마트폰` 의 `description` 값은 `NULL` 이기 때문에 조회가 될 것으로 기대했는데, 기대와는 다르게 아무
상품도 조회되지 않음.

## NULL 연산 - 알 수 없음

데이터베이스에서 '값이 없음'을 나타내는 특별한 상태를 `NULL` 이라고 함.

`NULL` 은 숫자 `0` 이나 빈 문자열(`''`)과는 완전히 다른 개념. 말 그대로 '알 수 없는 값', '존재하지 않는 값'이다. 상품 설명이 비어있는 상품을 찾기 위해 `WHERE description = NULL` 이라고 쓰면 될까? **절대 안된다.**
`NULL` 은 특정 값이 아니기 때문에 등호(`=`)로 비교할 수 없음.

이는 SQL에서 `NULL` 이 '값이 없는 상태'를 의미하는 특별한 존재이기 때문. `NULL` 은 0도 아니고, 공백 문자열('') 도 아니다. '알 수 없는 값'이라는 개념에 가깝다.

좀 더 쉽게 풀어서 이야기하자면 NULL은 '빈 상자'가 아니라 '상자가 있는지조차 모른다'는 표시다.
- `price=0`: 숫자가 `0` 이라는 값이 있다.
- `description=''`: 글자가 없다는 값이 있다. (두 쉼표가 사용되었다.)
- `NULL`: 값이 있는지 자체를 모른다.

따라서 `어떤 값 = NULL` 이라는 비교 연산은 항상 '알 수 없음(UNKNOWN)'이라는 결과를 반환한다. `NULL = NULL` 조차도 참(TRUE)이 아닌 '알 수 없음(UNKNOWN)'이다. **비교는 양쪽이 다 값을 가질 때만 참 거짓을 결정할 수 있다.

`WHERE` 절은 조건의 결과가 '참(TRUE)'인 행만 반환하므로, '알 수 없음(UNKNOWN)'으로 판별된 행은 결과에 포함 시키지 않는다.
이런 문제를 해결하기 위해 SQL은 `IS NULL` 이라는 특별한 키워드를 제공한다.
`NULL` 인지 아닌지를 검사하기 위해서는 반드시 `IS NULL` 또는 `IS NOT NULL` 을 사용해야 한다.
- `IS NULL`: 해당 열의 값이 `NULL` 인 행을 찾는다.
- `IS NOT NULL`: 해당 열의 값이 `NULL` 이 아닌, 즉 데이터가 입력된 행을 찾는다.

## NULL 정렬

왜 NULL 값의 정렬을 알아야 할까?
우리가 다루는 데이터가 항상 완벽하게 채워져 있지는 않다. 예를 들어, `products` 테이블을 다시 보자. `description` 열은 `NULL` 을 허용한다. 실제로 '보급형 스마트폰'의 `description` 값은 `NULL` 이다. 이때, **"상품 설명을 기준으로 가나다순 정렬해주세요."** 라는 요청을 받으면 어떻게 될까?

`NULL` 은 문자도, 숫자도 아닌데 도대체 어디에 위치해야 할까? `ORDER BY` 는 이 `NULL` 을 어떻게 처리할까? 이 규칙을 모르면 데이터가 왜 특정 위
치에 나오는지 설명할 수 없고, 원하는 결과를 얻기 위해 쿼리를 수정할 수도 없다.

### MySQL의 NULL 정렬 규칙

결론부터 말하자면, **MySQL은 `NULL` 을 가장 작은 값으로 취급한다.**
- `ORDER BY column ASC` (오름차순): `NULL` 값이 가장 **먼저** 나온다. (가장 작은 값으로 취급되므로)
- `ORDER BY column DESC` (내림차순): `NULL` 값이 가장 **나중에** 나온다. (가장 작은 값이라 맨 아래로 밀려나므로)

이것은 데이터베이스 시스템마다 정책이 다를 수 있으므로(Oracle은 `NULL` 을 가장 큰 값으로 취급한다), 내가 사용하
는 DB가 어떤 규칙을 따르는지 명확히 아는 것이 중요하다.

### \[실무 팁] NULL 위치를 강제로 바꾸고 싶을 때

상품 설명을 내림차순으로 정렬하되, 설명이 없는 상품(`NULL`)은 빨리 확인할 수 있게 맨 앞으로 보내라.
NULL은 가장 작은 값이기 때문에 내림차순으로 정렬하면 마지막에 옴. 이때는 `ORDER BY` 절에 조건을 추가하는 트릭을 사용함. `IS NULL` 을 활용.

```sql
SELECT product_id, name, description, description IS NULL
FROM products
ORDER BY description DESC;
```

<img width="931" height="168" alt="Image" src="https://github.com/user-attachments/assets/8cbef97a-9dd7-4430-b141-59f7a07f2558" />

description은 desc로 잘 출력되었고, MySQL은 null이 작은 값이기 때문에 마찬가지로 맨 마지막에 왔음. 이걸 젤 위로 올려야 함.

> 📌 MySQL은 TRUE는 1, FALSE는 0이라는 숫자로 표현 함.

따라서 ORDER BY에 `is null desc` 를 넣어주면 된다.

```sql
SELECT product_id, name, description, description IS NULL
FROM products
ORDER BY description IS NULL DESC, description DESC;
```

<img width="930" height="168" alt="Image" src="https://github.com/user-attachments/assets/4ba15e63-be5e-40d6-b6aa-0000d4317278" />
