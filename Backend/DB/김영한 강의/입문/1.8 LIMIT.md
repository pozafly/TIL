# LIMIT

## 조회 결과 개수를 제한하는 LIMIT

`LIMIT` 는 `ORDER BY` 뒤에 위치하며, 조회할 결과의 최대 개수를 제한하는 역할을 한다.

```sql
SELECT 열이름
FROM 테이블이름
WHERE 조건
ORDER BY 정렬기준
LIMIT 개수;
```

`LIMIT` 는 `ORDER BY` 와 함께 사용해야 진정한 의미가 있다.

데이터베이스는 결과의 순서를 보장하지 않음.
정렬되지 않은 상태에서 `LIMIT 2` 을 쓴다면, 실행할 때마다 다른 2개의 데이터가 나올 수도 있다. '가장 비싼 상품 TOP 2'처럼 의미 있는 상위 N개를 뽑으려면, **반드시 먼저 `ORDER BY` 로 정렬한 뒤 `LIMIT`로 잘라내야 함.**

```sql
SELECT * FROM products ORDER BY price DESC LIMIT 2;
```

## 실무의 핵심, 페이징(Pagination) 처리 \[문제 상황]

게시판, 상품 목록, 고객 리스트 등 웹사이트나 앱에서 보는 거의 모든 목록 페이지는 '페이징(Paging)' 처리가 되어 있다.
수십만 개의 게시글을 한 페이지에 다 보여주는 사이트는 없다. 보통 10개나 20개씩 끊어서 보여주고, 하단에 \[1], \[2], \[3], \[다음], \[마지막] 같은 페이지 번호를 제공한다.

사용자가 2페이지를 클릭하면 1페이지에 보였던 데이터는 건너뛰고, 그 다음 데이터들을 보여줘야 한다. 이 페이징 기능은 어떻게 구현할까? 바로 `LIMIT` 의 또 다른 사용법, '오프셋(Offset)'을 이용하면 된다.

### 특정 범위의 결과만 조회하기: LIMIT, 오프셋(Offset)

`LIMIT` 는 숫자 하나만 쓸 수도 있지만, 두 개 쓰기 가능.

```sql
LIMIT 건너뛸개수(offset), 가져올개수(row_count);
```

- `offset`: 앞에서부터 몇 개의 데이터를 건너뛸 것인지를 지정.
- `row_count`: 건너뛴 다음부터 몇 개의 데이터를 가져올 것인지를 지정.
	- 예를 들어, `LIMIT 10, 5` 라고 하면, 맨 앞의 10개 데이터는 건너뛰고, 11번째 데이터부터 5개를 가져오라는 의미.

> LIMIT 다양한 문법
> - MySQL에서는 `LIMIT 0, 2` 와 같이 `offset` 이 0인 경우 `LIMIT 2` 와 같이 줄여 쓸 수 있음.
> - MySQL에서는 `LIMIT 0, 2` 를 `LIMIT 2 OFFSET 0` 과 같이 `OFFSET` 키워드를 넣어 사용할 수 있음.

- **1페이지**: 처음부터 2개를 가져와야 한다. 건너뛸 필요가 없으니 `offset` 은 `0`. `LIMIT 0, 2`
- **2페이지**: 앞의 2개(1페이지 분량)를 건너뛰고 2개를 가져와야 한다. `offset` 은 `2`. `LIMIT 2, 2`
- **3페이지**: 앞의 4개(1, 2페이지 분량)를 건너뛰고 2개를 가져와야 한다. `offset` 은 `4`. `LIMIT 4, 2`
규칙은 다음과 같음: `offset = (페이지번호 - 1) * 페이지당_게시물수`
