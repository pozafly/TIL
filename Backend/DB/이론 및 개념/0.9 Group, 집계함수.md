# Group, ì§‘ê³„í•¨ìˆ˜

## ORDER BY

- ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • attribute ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•´ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
- default ì˜¤ë¦„ì°¨ìˆœ
- ì˜¤ë¦„ì°¨ìˆœ: ASC
- ë‚´ë¦¼ì°¨ìˆœ: DESC

## aggregate function

- ì—¬ëŸ¬ tupleë“¤ì˜ ì •ë³´ë¥¼ ìš”ì•½, í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜
- ëŒ€í‘œì ìœ¼ë¡œ COUNT, SUM, MAX, MIN, AVG
- (ì£¼ë¡œ) ê´€ì‹¬ìžˆëŠ” attributeì— ì‚¬ìš©ë¨. e.g.) AVG(salary), MAX(birth_date)
- null ê°’ì€ ì œì™¸í•˜ê³  ìš”ì•½ ê°’ì„ ì¶”ì¶œí•¨

```sql
SELECT count(*) FROM employee; -- 15
SELECT count(position) FROM employee; -- 15
SELECT count(dept_id) FROM employee; -- 13
```

- `*`: ê° íŠœí”Œì„ ì˜ë¯¸í•¨
- `position`: ì¤‘ë³µ ê°’ì´ ìžˆì–´ë„ í•˜ë‚˜ë¡œ ì³ì„œ `*` ê³¼ ë™ì¼í•œ ê²°ê³¼ë¥¼ ë‚˜íƒ€ëƒ„
- `dept_id`: `null` ê°’ì´ 2ê°œê°€ ìžˆì–´ì„œ 13ìœ¼ë¡œ í‘œí˜„ë¨
ðŸ“Œ ë”°ë¼ì„œ, ì¤‘ë³µ ê°’ì€ í•˜ë‚˜ë¡œ ì³ì£¼ì§€ë§Œ, nullì€ ì œì™¸í•˜ê³  ë™ìž‘í•¨.

í”„ë¡œì íŠ¸ 2003ì— ì°¸ì—¬í•œ ìž„ì§ì› ìˆ˜ì™€ ìµœëŒ€ ì—°ë´‰, ìµœì†Œ ì—°ë´‰ê³¼ í‰ê· ì„ ì•Œê³  ì‹¶ë‹¤.

```sql
SELECT count(*), max(salary), min(salary), avg(salary) FROM employee e
JOIN works_on wo ON e.id = wo.empl_id
WHERE proj_id = 2003;
```

## GROUP BY

- ê´€ì‹¬ìžˆëŠ” attribute ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹ì„ ë‚˜ëˆ , **ê·¸ë£¹ë³„ë¡œ aggregate functionì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©**
- grouping attribute: ê·¸ë£¹ì„ ë‚˜ëˆ„ëŠ” ê¸°ì¤€ì´ ë˜ëŠ” attribute
- grouping attributeì— null ê°’ì´ ìžˆì„ ê²½ìš° null ê°’ì„ ê°€ì§€ëŠ” tupleë¼ë¦¬ ë¬¶ìž„.

ê° í”„ë¡œì íŠ¸ ì°¸ì—¬í•œ ìž„ì§ì› ìˆ˜ì™€ ìµœëŒ€ ì—°ë´‰, ìµœì†Œ ì—°ë´‰ê³¼ í‰ê· ì„ ì•Œê³  ì‹¶ë‹¤.

```sql
SELECT wo.proj_id, count(*), max(salary), min(salary), avg(salary) FROM employee e
JOIN works_on wo ON e.id = wo.empl_id
GROUP BY wo.proj_id;
```

## HAVING í‚¤ì›Œë“œë¡œ ê·¸ë£¹ í•„í„°ë§ í•˜ê¸°

- group byì™€ í•¨ê»˜ ì‚¬ìš©
- aggregate functionì˜ ê²°ê³¼ ê°’ì„ ë°”íƒ•ìœ¼ë¡œ **ê·¸ë£¹ì„ í•„í„°ë§í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©**
- HAVING ì ˆì— ëª…ì‹œëœ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê·¸ë£¹ë§Œ ê²°ê³¼ì— í¬í•¨

í”„ë¡œì íŠ¸ ì°¸ì—¬ ì¸ì›ì´ 4ëª… ì´ìƒì¸ í”„ë¡œì íŠ¸ë“¤ì— ëŒ€í•´ ê° í”„ë¡œì íŠ¸ ì°¸ì—¬í•œ ìž„ì§ì› ìˆ˜ì™€ ìµœëŒ€ ì—°ë´‰, ìµœì†Œ ì—°ë´‰ê³¼ í‰ê· ì„ ì•Œê³  ì‹¶ë‹¤.

```sql
SELECT wo.proj_id, count(*), max(salary), min(salary), avg(salary) FROM employee e
JOIN works_on wo ON e.id = wo.empl_id
GROUP BY wo.proj_id
HAVING count(*) >= 4;
```
