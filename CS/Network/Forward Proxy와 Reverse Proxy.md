# Forward Proxy와 Reverse Proxy

> [출처](https://beomy.github.io/tech/etc/forward-proxy-reverse-proxy/)

## TL;DR

- Forward Proxy
  - 클라이언트 앞에 놓여 클라이언트 대신 통신을 담당함
  - 클라이언트의 정보를 숨겨 클라이언트를 보호함
  - 클라이언트가 특정 사이트를 접근할 수 없도록 막을 수 있음
  - 캐싱을 해 서버에 요청을 보내지 않고 클라이언트에게 응답할 수 있음.
- Reverse Proxy
  - 서버 앞에 놓여 서버 대신 통신을 담당함
  - 서버 정보를 숨겨 서버를 보호함
  - 서버에 과도한 요청이 전달되지 않도록 로드밸런싱 역할을 함
  - 캐싱을 하여 서버에 요청을 보내지 않고 클라이언트에게 응답할 수 있음
  - 암호화 복호화를 담당하여 서버 부하를 줄일 수 있음

<br/>

## Proxy란

사전적 의미로 대리, 대리인이라는 의미를 가지고 있다. 프록시 서버는 사전적 의미 그대로 대리로 통신을 하는 `서버` 다.

![image](https://github.com/pozafly/TIL/assets/59427983/e3aa01e7-4955-4312-9443-5154cf916dc6)

- 브라우저에 웹 사이트 주소를 입력함
- 프록시 서버가 사용자의 요청을 수신 받음
- 프록시 서버는 액세스 하려는 웹 서버로 요청을 전달함
- 웹 서버는 응답(웹 사이트 데이터)를 프록시 서버로 보냄
- 프록시 서버가 사용자에게 응답을 전달함

프록시 서버가 대신 통신을 하게 되면 통신을 요청/응답하는 대상을 감출 수 있어 보안을 강화할 수 있고, 응답 결과를 캐싱하게 되면 더 빠른 속도를 제공할 수 있다. 프록시의 위치에 따라 Forward Proxy, Reverse Proxy로 구분된다.

<br/>

## Forward Proxy

프록시, 프록시 서버, 웹 프록시, 정방향 프록시, 순방향 프록시라고도 불린다.

### 개념

앞쪽에 있는 클라에 대한 Proxy로 클라 뒤에 위치하는 프록시다. 클라이언트의 요청을 받아 인터넷을 통해 서버에서 데이터를 가져와 클라에게 응답해준다.

![image](https://github.com/pozafly/TIL/assets/59427983/fc2627b0-1992-44b3-8100-739012af2fad)

### 장점

#### 보안(클라이언트)

사내 네트워크에서는 특정 인터넷 사용을 막는 방화벽을 사용하는 경우가 있다. Forward Proxy는 방화벽처럼 특정 인터넷을 막는 용도로 사용할 수 있다. `https://www.naver.com` 에 접속하기 이해 통신을 요청하면 이 요청을 서버로 보내지 않고 클라 페이지에 접근할 수 없음을 응답해 클라의 특정 인터넷 요청을 차단할 수 있음.

통신 요청하는 클라가 Forward Proxy 뒤에 숨어있기 때문에 서버는 어떤 클라와 통신을 주고 받았는지 알 수 없다. 클라의 IP를 감출 수 있기 때문에 서버는 IP 주소를 역추적해도 Forward Proxy를 찾을 수 있을 뿐 클라는 찾을 수 없다.

#### 캐싱

클라이언트가 데이터를 요청하면 Forward Proxy는 클라이언트의 요청을 인터넷을 통해 서버에 요청을 전달하고 결과를 응답받는다. Forward Proxy는 응답받은 결과를 캐싱하고 있다가, 클라이언트가 동일한 데이터를 요청할 때 서버에 다시 데이터를 요청하지 않고 캐싱한 값을 클라이언트에 전달해 줌.

<br/>

## Reverse Proxy

apache, nginx와 같은 웹 서버가 Reverse Proxy다. 역방향 프록시.

### 개념

뒤쪽에 있는 서버에 대한 Proxy로 서버 앞에 위치함. 인터넷을 통해 전달받은 요청을 서버에 전달하고, 서버의 응답을 인터넷으로 전달해줌.

![image](https://github.com/pozafly/TIL/assets/59427983/6dea0e7d-f08b-4d78-8d44-031a6ba3c6f8)

### 장점

#### 보안(서버)

통신 요청을 받는 서버가 Reverse Proxy 뒤에 숨어 있기 때문에 서버 IP가 인터넷에 노출되지 않는다. 해커들은 서버에 직접 요청을 할 수 없기 때문에 DDos 공격을 막는데 유용함.

#### 캐싱

Forward Proxy와 동일하게 Reverse Proxy는 서버의 응답 결과를 캐싱하고 있다가 인터넷을 통해 동일한 요청이 온 경우 서버에 응답을 요청하지 않고 캐싱해 둔 값으로 응답하여 서버의 부하를 줄이고 클라이언트에게 더 빠르게 결과를 응답할 수 있다.

#### 로드 밸런싱

사용자 트래픽이 많은 서비스는 여러 개의 서버를 운용하게 되는데, Reverse Proxy는 인터넷을 통해 받은 요청들을 서버의 상태를 보고 서버가 과부하되지 않도록 로드밸런싱이 가능함.

#### 암호화

Reverse Proxy가 SSL(혹은 TSL)와 같은 암호화/복호화를 담당하여 암호화/복호화하는데 드는 서버 부하를 줄여줄 수 있다. 서버와의 모든 통신은 Reverse Proxy를 통하기 때문에 클라이언트와 안전한 통신을 할 수 있으며 서버 부하도 줄일 수 있다.

<br/>

## 차이점

- 프록시 서버 위치
  - Forward Proxy: 클라이언트 앞
  - Reverse Proxy는 서버 앞
- 프록시 대상
  - Forward Proxy: 클라이언트를 대신해서 통신
  - Reverse Proxy: 서버를 대신해서 통신
- 숨기는 대상
  - Forward Proxy: 클라이언트 정보를 숨김
  - Reverse Proxy: 서버 정보를 숨김
