# 웹서버 운영

[네트워크 - 집에서 웹서버 운영하기 (1/3)](https://www.youtube.com/watch?v=Ou7MW3KKBVg)

[네트워크 - 집에서 웹서버 운영하기 (2/3)](https://www.youtube.com/watch?v=WN_IGbVUCk4&feature=youtu.be) 

[네트워크 - 집에서 웹서버 운영하기 (3/3)](https://www.youtube.com/watch?v=BBKOA9xod3E&feature=youtu.be)

<br/>

## 유동ip 

: ip는 한정되어있고, 수용을 더욱 많이 해야할 때 접속이 없는 곳은 ip를 끊고, 접속이 되어있는 곳은 ip를 줘야 한다. 이때 ip가 자꾸 바뀌게 되는데 이것을 유동ip라고 함. 주로 집에서 WIFI를 잡거나 할 때 사용됨. 운영 서버에는 유동ip를 사용하면 안된다. 고정되어야 하기 때문.

그래서 나온 것이 다이나믹DNS.

<br/> 

## 다이나믹DNS(DDNS)

: IP가 바뀔 때마다 도메인 네임 서버에 전달해서 IP가 바뀌었다는 사실을 알아내고 변경할 수있도록 하는 것.

<br/> 

## 포트포워딩

- 포트 : 컴퓨터의 입구. 포트에 따라서 한 컴퓨터의 어느 SW에 접속할 것인지를 판단해줌. 문이라고 생각하면 쉬움.

※일반적인 포트 구성

1. 80 : 웹서버. 웹브라우저에서 요청했으므로 처음엔 80번 포트로 접근하게 된다.

   ex) naver.com을 치면 사실은 naver.com:80 을 입력한 것이다.

2. 20 : FTP

- 포트포워딩 : 포트 번호로 클라이언트가 접속했을 때, 공유기에서 해당 WAS를 지정해두고 WAS의 포트번호로 접속하게 하는 것.

포트는 컴퓨터와 컴퓨터가 네트워크 통신을 주고 받기 위한 채널이다. 포트포워딩은 공유기에 도착한 외부의 접속이 특정한 포트를 통해서 도달했을 때 그것을 공유기에 연결된 컴퓨터로 전달하는 역할을 한다. 

<br/>

## 내 IP 찾기 

내 ip를 찾기 위해서는 몇가지 과정을 거쳐야 함.

1. google에 my ip라고 입력하면, 106.242.162.222 이것과 같은 내 컴퓨터의 외부ip가 나오고
2. cmd창에 ipconfig 라고 치면, 이더넷 어댑터 이더넷 IPv4 주소 : 192.168.1.53 이런 유동ip가 나옴.

이 두개의 ip가 같다면 고민없이 사용하면 되지만 공유기를 경유한다면 보통 다를 것임.

3. 192.168.1.1 공유기 주소를 치고 들어가보면, 외부주소 106.242.162.222 이게 나옴. 따라서 이 외부주소로 연결하고,
4. 고급설정 -> NAT/라우터 관리 -> 포트포워드 설정

그리고 새 규칙으로 내 공유기에 물려있는 내부주소 192.168.1.53 유동ip를 입력해주고, 프로토콜로는 TCP, 외부포트와 내부포트는 사용할 톰캣 혹은 켜져있는 서버의 포트번호를 입력하고 규칙을 추가해주면 됨. 

5. 개발한 STS TOMCAT서버를 돌려놓고
6. 이제 LTE가 켜져있는 내 폰으로 106.242.162.222:8282/FileTest/upload/uploadForm 에 접속하면 내가 개발한 화면이 뜨게 됨.

여기서 문제가 생긴다. 이제 컴퓨터를 껐다키면 우리의 내부 IP는 변해있을 것이기 때문. 그러면 또 IPTIME에 들어가서 내부 IP를 수정하는 일을 계속 해줘야 함. 이제 네임서버를 설정해주면 일관된 IP로 접속하게 해줌. 돈줘야 함.