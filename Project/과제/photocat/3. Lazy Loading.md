# Lazy Loading

Lazy Loadingì´ë€?

í˜„ì¬ í˜ì´ì§€ì—ì„œ ë‹¹ì¥ í•„ìš”í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€ë“¤ì˜ **ë¡œë”© ì‹œì ì„ ì ì‹œ ë’¤ë¡œ ë¯¸ë£¨ê³ , ìŠ¤í¬ë¡¤ ë“±ìœ¼ë¡œ ì‹¤ì œë¡œ ì´ë¯¸ì§€ê°€ ë³´ì—¬ì ¸ì•¼ í•  ì‹œì ì— ë¡œë”© ë˜ëŠ” ê²ƒ**ì„ ë§í•œë‹¤.

## Intersection Observer

[Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)ë¥¼ í™œìš©í•´ Lazy Loadingì„ êµ¬í˜„í•˜ë©´ ëœë‹¤. 

- Intersection Observer APIëŠ” **ê°ì‹œ ëŒ€ìƒ ìš”ì†Œê°€ viewportì— ë“¤ì–´ì˜¬ ë•Œ ì‹¤í–‰ë  ì½œë°± í•¨ìˆ˜**ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

  > ### ğŸ’¡Intersection Observer ì‚¬ìš© ë°©ë²•
  >
  > 1. intersection observer ìƒì„±í•˜ê¸°
  >
  >    ```js
  >    let observer = new IntersectionObserver(callback, options);
  >    ```
  >
  >    - `callback` : ê°ì‹œ ëŒ€ìƒ ìš”ì†Œê°€ viewportì— ë“¤ì–´ì™”ì„ ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜ì´ë‹¤.
  >
  >    - `options` : ì½œë°±ì´ í˜¸ì¶œë˜ëŠ” ìƒí™©ì„ ì¡°ì‘í•  ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
  >
  >      ë§Œì•½ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜µì €ë²„ëŠ” ë¬¸ì„œì˜ ë·°í¬íŠ¸ë¥¼ ë£¨íŠ¸ë¡œ ì‚¬ìš©í•˜ê³ , ì—¬ë°±ì€ ì—†ì´, ì—­ì¹˜ëŠ” 0(1í”½ì…€ì´ë¼ë„ ë³€í•˜ë©´ ì½œë°±ì„ í˜¸ì¶œ)ì´ ëœë‹¤!
  >
  > 2. ì‹¤í–‰í•  callback í•¨ìˆ˜ ë“±ë¡í•˜ê¸°
  >
  >    - ê°ì‹œ ëŒ€ìƒì´ viewport ì•ˆì— ë“¤ì–´ì˜¬ ê²½ìš°, ë¬´ì—‡ì„ ì‹¤í–‰í•  ì§€ `callback()`ì— ë“±ë¡í•´ì¤€ë‹¤.
  >
  > 3. targeting an element to be observed
  >
  >    - ìœ„ì—ì„œ ìƒì„±ëœ ê°ì²´ `observer`ì˜ ë‚´ì¥ í•¨ìˆ˜ [**`observe()`**](https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver/observe) ì•ˆì— ê°ì‹œí•˜ë ¤ëŠ” ìš”ì†Œë¥¼ ì „ë‹¬í•œë‹¤.
  >
  >    ```js
  >    observer.observe(target); // target: ê°ì‹œí•˜ë ¤ëŠ” ìš”ì†Œ
  >    ```
  >
  > ------
  >
  > - ê·¸ëŸ¼ ì´ì œ ë‹¤ì‹œ **Intersection Observerë¥¼ Lazy Loadingì— ì–´ë–»ê²Œ ì‚¬ìš©í–ˆëŠ”ì§€** ì•Œì•„ë³´ì~

- ë¨¼ì €, ê°ì‹œ ëŒ€ìƒ ìš”ì†Œê°€ ë  ì´ë¯¸ì§€ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ì£¼ì—ˆë‹¤.

  ```html
  <img class="lazy" data-src="${cat.url}" alt="" />
  ```

  ë¶ˆëŸ¬ì˜¬ ì´ë¯¸ì§€ì˜ urlì„ `src`ê°€ ì•„ë‹Œ `data-src`ì— í• ë‹¹í•œ ì ì„ ì£¼ì˜í•´ì„œ ë³´ì. ì´ëŠ” [**ë°ì´í„° ì†ì„±**](https://developer.mozilla.org/ko/docs/Learn/HTML/Howto/Use_data_attributes)ì— url ì •ë³´ë¥¼ ë‹´ì•„ë‘” ê²ƒìœ¼ë¡œ, javascriptì—ì„œëŠ” `data-` ë’· ë¶€ë¶„ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì†ì„±ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

- ì‹¤í–‰ë  callback()ì„ ë‹¤ìŒê³¼ ê°™ë‹¤. (optionsëŠ” ì§€ì •í•´ì£¼ì§€ ì•ŠìŒ. ë””í´íŠ¸ ì„¤ì •ì„ ì‚¬ìš©í•¨)

```js
lazyLoading() {
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(function (entry) {
            if (entry.isIntersecting) {
                const image = entry.target;
                image.src = image.dataset.src;
                image.classList.remove("lazy");
                imageObserver.unobserve(image);
            }
        });
    });
// ...
```

- [`isIntersecting()`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting) : ê°ì‹œ ëŒ€ìƒ ìš”ì†Œê°€ viewportì— ë“¤ì–´ê°„ ê²ƒì„ ê°ì§€í•˜ë©´ trueë¥¼ ë°˜í™˜í•œë‹¤.
- trueë¥¼ ë°˜í™˜í•˜ë©´ `image.src = image.dataset.src;`ë¥¼ í†µí•´ `dataset.src`ì— ë‹´ì•„ë‘” urlì„ ì‹¤ì œ `src`ì— ì „ë‹¬í•œë‹¤.
- ê·¸ë¦¬ê³  **`unobserve(image)`ë¥¼ í†µí•´ ê°ì‹œ ëŒ€ìƒì˜ ê´€ì°°ì„ ì¤‘ì§€í•œë‹¤.**

- ë§ˆì§€ë§‰ìœ¼ë¡œ, `observe()`ë¥¼ í†µí•´ ê°ì‹œ ëŒ€ìƒ ìš”ì†Œê°€ ë  targetì„ IntersectionObserverì—ê²Œ ì „ë‹¬í•œë‹¤.

  ```js
  const lazyloadImages = document.querySelectorAll(".lazy");
  lazyloadImages.forEach(function (image) {
      imageObserver.observe(image);
  });
  ```